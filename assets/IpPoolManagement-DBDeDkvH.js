import{p as re,a as B,c as Ve,q as me,l as h,e as p,w as t,d as e,s as M,k as c,h as v,b as z,v as T,F as H,u as J,x as we,g as C,y as Ae,E as ce,_ as se,t as P,r as pe,o as Pe,m as oe,n as ke}from"./index-vi6JGPo6.js";function De(l,n){if(!l||l.trim()==="")return!1;if(l=l.trim(),console.log("Validating range:",l,"protocol:",n),n==="IPV4"){if(l.includes("/"))try{return Le(l)}catch(u){return console.error("CIDR validation error:",u),!1}if(l.includes("-")){const[u,d]=l.split("-").map(y=>y.trim()),o=R(u),g=R(d);return console.log("Range validation result:",o&&g,"start:",o,"end:",g),o&&g}const m=R(l);return console.log("Single IP validation result:",m),m}else{if(l.includes("/"))try{return xe(l)}catch(u){return console.error("IPv6 CIDR validation error:",u),!1}if(l.includes("-")){const[u,d]=l.split("-").map(y=>y.trim()),o=X(u),g=X(d);return console.log("IPv6 Range validation result:",o&&g),o&&g}const m=X(l);return console.log("Single IPv6 validation result:",m),m}}function Be(l,n,m){if(m!=="IPV4")return!1;try{let d=function(I){if(!I||I.trim()==="")throw new Error("Empty range");if(I=I.trim(),I.includes("/")){const[k,A]=I.split("/");if(!R(k)||!fe(A))throw new Error("Invalid CIDR");const N=parseInt(A,10),S=u(k),f=~((1<<32-N)-1),s=S&f,D=s|~f;return[s,D]}if(I.includes("-")){const[k,A]=I.split("-").map(N=>N.trim());if(!R(k)||!R(A))throw new Error("Invalid IP range");return[u(k),u(A)]}if(!R(I))throw new Error("Invalid IP");const E=u(I);return[E,E]};const u=I=>I.split(".").reduce((E,k)=>(E<<8)+Number(k),0),[o,g]=d(l),[y,i]=d(n);return console.log("Overlap check:",l,n,[o,g],[y,i]),Math.max(o,y)<=Math.min(g,i)}catch(u){return console.error("Error in isRangeOverlap:",u),!1}}function R(l){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(l)}function X(l){return/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4})$/.test(l)}function fe(l){const n=parseInt(l,10);return!isNaN(n)&&n>=0&&n<=32}function Ee(l){const n=parseInt(l,10);return!isNaN(n)&&n>=0&&n<=128}function Le(l){if(!l.includes("/"))return!1;const[n,m]=l.split("/"),u=R(n),d=fe(m);return console.log("CIDR validation result:",u&&d,"IP:",u,"Prefix:",d),u&&d}function xe(l){if(!l.includes("/"))return!1;const[n,m]=l.split("/"),u=X(n),d=Ee(m);return console.log("IPv6 CIDR validation result:",u&&d),u&&d}const ze=[{id:"dc1",name:"北京机房"},{id:"dc2",name:"上海机房"},{id:"dc3",name:"广州机房"}];let G=[{id:"LCG1000000001",name:"业务网池A",protocol:"IPV4",ranges:["192.168.1.0/24","192.168.2.1-192.168.2.100"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"测试用",createdAt:"2024-06-01 10:00",createdBy:"admin",updatedAt:"2024-06-01 10:00",updatedBy:"admin",usedCount:10,availableCount:244},{id:"LCG1000000002",name:"Anycast池",protocol:"IPV4",ranges:["10.0.0.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"",createdAt:"2024-06-02 11:00",createdBy:"user1",updatedAt:"2024-06-02 11:00",updatedBy:"user1",usedCount:0,availableCount:256},{id:"LCG1000000003",name:"防护网池",protocol:"IPV4",ranges:["172.16.0.0/16"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"用于DDoS防护",createdAt:"2024-06-03 09:30",createdBy:"admin",updatedAt:"2024-06-03 09:30",updatedBy:"admin",usedCount:25,availableCount:65511},{id:"LCG1000000004",name:"上海业务网池",protocol:"IPV4",ranges:["192.170.0.0/24","192.170.1.0/24"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"上海机房专用",createdAt:"2024-06-04 14:15",createdBy:"operator1",updatedAt:"2024-06-04 14:15",updatedBy:"operator1",usedCount:120,availableCount:392},{id:"LCG1000000005",name:"IPv6测试池",protocol:"IPV6",ranges:["2001:db8::/64"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"IPv6测试用途",createdAt:"2024-06-05 11:20",createdBy:"tester",updatedAt:"2024-06-05 11:20",updatedBy:"tester",usedCount:5,availableCount:18446744073709552e3},{id:"LCG1000000006",name:"广州备用池",protocol:"IPV4",ranges:["10.10.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"DISABLED",remark:"备用资源",createdAt:"2024-06-06 16:40",createdBy:"admin",updatedAt:"2024-06-06 16:40",updatedBy:"admin",usedCount:0,availableCount:65536},{id:"LCG1000000007",name:"Anycast全球加速",protocol:"IPV4",ranges:["103.21.244.0/24"],dataCenterId:"",isAnycast:!0,status:"ENABLED",remark:"全球加速网络",createdAt:"2024-06-07 08:30",createdBy:"network_admin",updatedAt:"2024-06-07 08:30",updatedBy:"network_admin",usedCount:200,availableCount:56},{id:"LCG1000000008",name:"内部测试网池",protocol:"IPV4",ranges:["192.168.100.0/24","192.168.101.0/24","192.168.102.0/24"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"仅供内部测试使用",createdAt:"2024-06-08 10:15",createdBy:"test_admin",updatedAt:"2024-06-08 10:15",updatedBy:"test_admin",usedCount:45,availableCount:723},{id:"LCG1000000009",name:"IPv6生产池",protocol:"IPV6",ranges:["2001:0db8:85a3::/64","2001:0db8:85a4::/64"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"IPv6生产环境",createdAt:"2024-06-09 13:45",createdBy:"prod_admin",updatedAt:"2024-06-09 13:45",updatedBy:"prod_admin",usedCount:120,availableCount:36893488147419103e3},{id:"LCG1000000010",name:"混合网池",protocol:"IPV4",ranges:["172.31.0.0/16","172.32.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"混合业务使用",createdAt:"2024-06-10 09:00",createdBy:"system",updatedAt:"2024-06-10 09:00",updatedBy:"system",usedCount:1024,availableCount:130048},{id:"LCG1000000011",name:"Anycast备用池",protocol:"IPV4",ranges:["103.22.200.0/24","103.22.201.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"Anycast备用资源",createdAt:"2024-06-11 14:30",createdBy:"network_admin",updatedAt:"2024-06-11 14:30",updatedBy:"network_admin",usedCount:0,availableCount:512}],Ne={LCG1000000001:[{segmentId:"192.168.1.0/24",ip:"192.168.1.10",ipInt:3232235786,clusterName:"集群A",instanceId:"ins-1",customerId:"cust-1",remark:""},{segmentId:"192.168.2.1-192.168.2.100",ip:"192.168.2.50",ipInt:3232236098,clusterName:"集群B",instanceId:"ins-2",customerId:"cust-2",remark:""}],LCG1000000002:[],LCG1000000003:[{segmentId:"172.16.0.0/16",ip:"172.16.1.1",ipInt:2886729985,clusterName:"防护集群A",instanceId:"ins-10",customerId:"cust-5",remark:"防火墙实例"}],LCG1000000004:[{segmentId:"192.170.0.0/24",ip:"192.170.0.10",ipInt:3232301066,clusterName:"上海集群A",instanceId:"ins-sh-1",customerId:"cust-3",remark:""},{segmentId:"192.170.0.0/24",ip:"192.170.0.11",ipInt:3232301067,clusterName:"上海集群A",instanceId:"ins-sh-2",customerId:"cust-3",remark:""}],LCG1000000005:[{segmentId:"2001:db8::/64",ip:"2001:db8::1",ipInt:0,clusterName:"IPv6测试集群",instanceId:"ins-ipv6-1",customerId:"cust-4",remark:"IPv6测试实例"}],LCG1000000007:[{segmentId:"103.21.244.0/24",ip:"103.21.244.10",ipInt:1732327434,clusterName:"全球加速集群",instanceId:"ins-cdn-1",customerId:"cust-10",remark:"CDN节点"}],LCG1000000008:[{segmentId:"192.168.100.0/24",ip:"192.168.100.5",ipInt:3232261125,clusterName:"测试集群",instanceId:"ins-test-1",customerId:"internal",remark:"测试用例"}]};function Se(l,n){let m=G.filter(g=>!(l.protocol&&g.protocol!==l.protocol||l.dataCenterId&&g.dataCenterId!==l.dataCenterId||l.status&&g.status!==l.status||l.name&&!g.name.includes(l.name)));const u=m.length,d=(n.page-1)*n.pageSize,o=d+n.pageSize;return m=m.slice(d,o),Promise.resolve({list:m,total:u})}function Fe(){return Promise.resolve(ze)}function $e(l){return G=G.filter(n=>n.id!==l),Promise.resolve()}function Ue(l){return l.id?G=G.map(n=>n.id===l.id?{...n,...l}:n):(l.id="LCG"+(1e9+G.length+1),l.createdAt=l.updatedAt=new Date().toISOString().slice(0,16).replace("T"," "),l.createdBy=l.updatedBy="mockUser",l.usedCount=0,l.availableCount=256,G.push(l)),Promise.resolve()}function Re(l,n,m){const u=G.find(i=>i.id===l);if(!u)return Promise.resolve({list:[],total:0,pool:null});let d=(Ne[l]||[]).filter(i=>!(n.ip&&!i.ip.includes(n.ip)||n.instanceId&&!i.instanceId.includes(n.instanceId)||n.customerId&&!i.customerId.includes(n.customerId)));const o=d.length,g=(m.page-1)*m.pageSize,y=g+m.pageSize;return d=d.slice(g,y),Promise.resolve({list:d,total:o,pool:u})}const Ge={class:"ranges-container"},he={key:0,class:"empty-ranges"},Me=re({__name:"IpPoolModal",props:{visible:Boolean,editData:Object,dataCenters:Array},emits:["close","refresh"],setup(l,{emit:n}){const m=l,u=n,d=B(),o=B({name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}),g={name:[{required:!0,message:"请输入网池名称",trigger:"blur"}],protocol:[{required:!0,message:"请选择协议族",trigger:"change"}],ranges:[{required:!0,validator:A,trigger:"blur"}],dataCenterId:[{required:!0,message:"请选择机房",trigger:"change",validator:N}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},y=Ve(()=>o.value.protocol==="IPV4"?"如192.168.1.0/24":"如2001:db8::/32");me(()=>m.editData,f=>{f?o.value={...o.value,...f}:o.value={name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}},{immediate:!0});function i(){o.value.ranges.push("")}function I(f){o.value.ranges.splice(f,1)}function E(){o.value.ranges=[]}function k(f){f&&(o.value.dataCenterId=null)}function A(f,s,D){if(!s||s.length===0)return D(new Error("请至少添加一个区间"));const b=s.filter(V=>V&&V.trim()!=="");if(b.length===0)return D(new Error("请至少添加一个有效区间"));const _=[];for(const V of b)De(V,o.value.protocol)||_.push(V);if(_.length>0)return D(new Error(`以下区间格式有误: ${_.join(", ")}`));if(o.value.protocol==="IPV4")try{for(let V=0;V<b.length;V++)for(let U=V+1;U<b.length;U++)if(Be(b[V],b[U],o.value.protocol))return D(new Error(`区间 ${b[V]} 与 ${b[U]} 存在重叠`))}catch(V){console.error("检查重叠出错:",V)}D()}function N(f,s,D){if(!o.value.isAnycast&&!s)return D(new Error("请选择机房"));D()}function S(){d.value.validate(async f=>{f&&(await Ue(o.value),ce.success("保存成功"),u("close"),u("refresh"))})}return(f,s)=>{const D=p("el-input"),b=p("el-form-item"),_=p("el-radio"),V=p("el-radio-group"),U=p("el-icon"),j=p("el-button"),L=p("el-switch"),Y=p("el-option"),Z=p("el-select"),K=p("el-form"),ee=p("el-drawer");return C(),h(ee,{"model-value":l.visible,title:l.editData?"编辑网池":"新建网池",size:"50%",onClose:s[7]||(s[7]=w=>f.$emit("close"))},{footer:t(()=>[e(j,{onClick:s[6]||(s[6]=w=>f.$emit("close"))},{default:t(()=>s[15]||(s[15]=[c("取消")])),_:1,__:[15]}),e(j,{type:"primary",onClick:S},{default:t(()=>s[16]||(s[16]=[c("保存")])),_:1,__:[16]})]),default:t(()=>[e(K,{model:o.value,rules:g,ref_key:"formRef",ref:d,"label-width":"100px"},{default:t(()=>[e(b,{label:"网池名称",prop:"name"},{default:t(()=>[e(D,{modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=w=>o.value.name=w),maxlength:"32"},null,8,["modelValue"])]),_:1}),e(b,{label:"协议族",prop:"protocol"},{default:t(()=>[e(V,{modelValue:o.value.protocol,"onUpdate:modelValue":s[1]||(s[1]=w=>o.value.protocol=w),onChange:E},{default:t(()=>[e(_,{label:"IPV4"},{default:t(()=>s[8]||(s[8]=[c("IPv4")])),_:1,__:[8]}),e(_,{label:"IPV6"},{default:t(()=>s[9]||(s[9]=[c("IPv6")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"区间列表",prop:"ranges"},{default:t(()=>[v("div",Ge,[(C(!0),z(H,null,T(o.value.ranges,(w,q)=>(C(),z("div",{key:q,class:"range-item"},[e(D,{modelValue:o.value.ranges[q],"onUpdate:modelValue":Q=>o.value.ranges[q]=Q,placeholder:y.value},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(j,{type:"danger",size:"small",circle:"",onClick:Q=>I(q),class:"remove-btn"},{default:t(()=>[e(U,null,{default:t(()=>[e(J(Ae))]),_:1})]),_:2},1032,["onClick"])]))),128)),o.value.ranges.length===0?(C(),z("div",he,s[10]||(s[10]=[v("span",{class:"text-gray-400"},"暂无区间，请添加",-1)]))):M("",!0),e(j,{type:"primary",onClick:i,size:"small",class:"add-btn"},{default:t(()=>[e(U,null,{default:t(()=>[e(J(we))]),_:1}),s[11]||(s[11]=c(" 添加区间 "))]),_:1,__:[11]}),s[12]||(s[12]=v("div",{class:"range-tips"},"支持单IP、IP区间、CIDR格式，例：192.168.1.1、192.168.1.1-192.168.1.100、192.168.1.0/24",-1))])]),_:1}),e(b,{label:"Anycast"},{default:t(()=>[e(L,{modelValue:o.value.isAnycast,"onUpdate:modelValue":s[2]||(s[2]=w=>o.value.isAnycast=w),onChange:k},null,8,["modelValue"])]),_:1}),o.value.isAnycast?M("",!0):(C(),h(b,{key:0,label:"所属机房",prop:"dataCenterId"},{default:t(()=>[e(Z,{modelValue:o.value.dataCenterId,"onUpdate:modelValue":s[3]||(s[3]=w=>o.value.dataCenterId=w),placeholder:"请选择机房"},{default:t(()=>[(C(!0),z(H,null,T(l.dataCenters,w=>(C(),h(Y,{key:w.id,label:w.name,value:w.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),e(b,{label:"状态",prop:"status"},{default:t(()=>[e(V,{modelValue:o.value.status,"onUpdate:modelValue":s[4]||(s[4]=w=>o.value.status=w)},{default:t(()=>[e(_,{label:"ENABLED"},{default:t(()=>s[13]||(s[13]=[c("启用")])),_:1,__:[13]}),e(_,{label:"DISABLED"},{default:t(()=>s[14]||(s[14]=[c("禁用")])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"备注",prop:"remark"},{default:t(()=>[e(D,{modelValue:o.value.remark,"onUpdate:modelValue":s[5]||(s[5]=w=>o.value.remark=w),type:"textarea",maxlength:"128"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}}),je=se(Me,[["__scopeId","data-v-d26bb37d"]]),qe={key:0,class:"pool-info"},Oe={class:"info-row"},Te={class:"ranges-list"},He={key:0,class:"text-gray-400"},Je=re({__name:"IpPoolAllocatedDrawer",props:{visible:Boolean,pool:Object},setup(l){const n=l,m=B({ip:"",instanceId:"",customerId:""}),u=B([]),d=B({page:1,pageSize:20,total:0});async function o(){if(!n.pool)return;const{list:y,total:i,pool:I}=await Re(n.pool.id,m.value,d.value);u.value=y,d.value.total=i,I&&I.ranges&&Object.assign(n.pool,I)}function g(){m.value={ip:"",instanceId:"",customerId:""},o()}return me(()=>n.pool,y=>{y&&o()}),(y,i)=>{const I=p("el-tag"),E=p("el-divider"),k=p("el-input"),A=p("el-form-item"),N=p("el-button"),S=p("el-form"),f=p("el-table-column"),s=p("el-table"),D=p("el-pagination"),b=p("el-drawer");return C(),h(b,{"model-value":l.visible,title:"已分配IP列表",size:"60%",onClose:i[5]||(i[5]=_=>y.$emit("close"))},{default:t(()=>[l.pool?(C(),z("div",qe,[i[9]||(i[9]=v("h3",null,"网池信息",-1)),v("div",Oe,[i[6]||(i[6]=v("span",{class:"info-label"},"ID:",-1)),c(" "+P(l.pool.id)+" ",1),i[7]||(i[7]=v("span",{class:"info-label ml-4"},"名称:",-1)),c(" "+P(l.pool.name)+" ",1),i[8]||(i[8]=v("span",{class:"info-label ml-4"},"协议族:",-1)),c(" "+P(l.pool.protocol==="IPV4"?"IPv4":"IPv6"),1)]),i[10]||(i[10]=v("div",{class:"info-row"},[v("span",{class:"info-label"},"网段列表:")],-1)),v("div",Te,[(C(!0),z(H,null,T(l.pool.ranges,(_,V)=>(C(),h(I,{key:V,class:"range-tag",size:"small"},{default:t(()=>[c(P(_),1)]),_:2},1024))),128)),l.pool.ranges.length===0?(C(),z("span",He,"无网段")):M("",!0)])])):M("",!0),e(E),e(S,{inline:!0,model:m.value,style:{"margin-bottom":"12px"}},{default:t(()=>[e(A,{label:"IP地址"},{default:t(()=>[e(k,{modelValue:m.value.ip,"onUpdate:modelValue":i[0]||(i[0]=_=>m.value.ip=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,{label:"实例ID"},{default:t(()=>[e(k,{modelValue:m.value.instanceId,"onUpdate:modelValue":i[1]||(i[1]=_=>m.value.instanceId=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,{label:"客户ID"},{default:t(()=>[e(k,{modelValue:m.value.customerId,"onUpdate:modelValue":i[2]||(i[2]=_=>m.value.customerId=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,null,{default:t(()=>[e(N,{type:"primary",onClick:o},{default:t(()=>i[11]||(i[11]=[c("查询")])),_:1,__:[11]}),e(N,{onClick:g},{default:t(()=>i[12]||(i[12]=[c("重置")])),_:1,__:[12]})]),_:1})]),_:1},8,["model"]),e(s,{data:u.value,style:{width:"100%"},"row-key":"ip"},{default:t(()=>[e(f,{prop:"segmentId",label:"网段ID","min-width":"120"}),e(f,{prop:"ip",label:"IP地址","min-width":"120"}),e(f,{prop:"ipInt",label:"IP地址int","min-width":"120"}),e(f,{prop:"clusterName",label:"所属逻辑集群","min-width":"120"}),e(f,{prop:"instanceId",label:"业务实例ID","min-width":"120"}),e(f,{prop:"customerId",label:"所属客户ID","min-width":"120"}),e(f,{prop:"remark",label:"备注","min-width":"120"})]),_:1},8,["data"]),e(D,{"current-page":d.value.page,"onUpdate:currentPage":i[3]||(i[3]=_=>d.value.page=_),"page-size":d.value.pageSize,"onUpdate:pageSize":i[4]||(i[4]=_=>d.value.pageSize=_),total:d.value.total,layout:"total, prev, pager, next, sizes","page-sizes":[10,20,50,100],onCurrentChange:o,onSizeChange:o,style:{"margin-top":"16px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1},8,["model-value"])}}}),Ke=se(Je,[["__scopeId","data-v-f411241c"]]),Qe={class:"ip-pool-management"},We={class:"card-header"},Xe={class:"search-area"},Ye={class:"ellipsis-cell"},Ze={class:"mt-2 flex justify-end"},et={class:"mt-2 flex justify-end"},tt={class:"network-ranges"},lt={key:0,class:"text-gray-400"},at={class:"pagination-container"},nt=re({__name:"IpPoolManagement",setup(l){const n=pe({protocol:"",dataCenterId:"",status:"",name:""}),m=B([]),u=B([]),d=pe({page:1,pageSize:20,total:0}),o=B(!1),g=B(null),y=B(!1),i=B(null),I=B(!1),E=B(""),k=B(!1),A=B([]),N=B(!1),S=B([]);function f($){const a=u.value.find(x=>x.id===$);return a?a.name:""}function s(){n.protocol=E.value,L()}function D(){}function b(){n.dataCenterId=A.value.join(","),L(),k.value=!1}function _(){A.value=[],n.dataCenterId="",L(),k.value=!1}function V(){}function U(){n.status=S.value.join(","),L(),N.value=!1}function j(){S.value=[],n.status="",L(),N.value=!1}async function L(){const $={...n,dataCenterId:n.dataCenterId,status:n.status},{list:a,total:x}=await Se($,d);m.value=a,d.total=x}async function Y(){u.value=await Fe()}function Z(){n.name="",E.value="",A.value=[],S.value=[],n.protocol="",n.dataCenterId="",n.status="",L()}function K($=null){g.value=$,o.value=!0}async function ee($){await ke.confirm("确定要删除该网池吗？","提示",{type:"warning"}),await $e($.id),ce.success("删除成功"),L()}function w($){i.value=$,y.value=!0}function q(){o.value=!1}function Q(){L()}return Pe(()=>{Y(),L()}),($,a)=>{const x=p("el-button"),ve=p("el-input"),ie=p("el-form-item"),ge=p("el-form"),F=p("el-table-column"),Ie=p("el-tooltip"),te=p("el-radio"),_e=p("el-radio-group"),le=p("el-icon"),W=p("el-popover"),ae=p("el-checkbox"),de=p("el-checkbox-group"),ue=p("el-tag"),Ce=p("el-table"),ye=p("el-pagination"),be=p("el-card");return C(),z("div",Qe,[e(be,{class:"box-card"},{header:t(()=>[v("div",We,[a[12]||(a[12]=v("span",null,"网池管理",-1)),e(x,{type:"primary",onClick:a[0]||(a[0]=r=>K())},{default:t(()=>a[11]||(a[11]=[c("新建网池")])),_:1,__:[11]})])]),default:t(()=>[v("div",Xe,[e(ge,{inline:!0,model:n},{default:t(()=>[e(ie,{label:"网池名称"},{default:t(()=>[e(ve,{modelValue:n.name,"onUpdate:modelValue":a[1]||(a[1]=r=>n.name=r),placeholder:"请输入网池名称",clearable:"",style:{"max-width":"220px"}},null,8,["modelValue"])]),_:1}),e(ie,null,{default:t(()=>[e(x,{type:"primary",onClick:L},{default:t(()=>a[13]||(a[13]=[c("查询")])),_:1,__:[13]}),e(x,{onClick:Z},{default:t(()=>a[14]||(a[14]=[c("重置")])),_:1,__:[14]})]),_:1})]),_:1},8,["model"])]),e(Ce,{data:m.value,style:{width:"100%","min-height":"500px","margin-top":"20px"},border:"",stripe:"","max-height":"700","header-cell-style":{position:"sticky",top:0,background:"#fff",zIndex:2},"row-class-name":"dense-row"},{empty:t(()=>a[30]||(a[30]=[v("div",{class:"text-gray-400 py-10 text-center"},"暂无数据",-1)])),default:t(()=>[e(F,{prop:"id",label:"ID",width:"180",fixed:"left"}),e(F,{prop:"name",label:"网池名称",width:"150"},{default:t(r=>[e(Ie,{effect:"dark",content:r.row.name,placement:"top"},{default:t(()=>[v("span",Ye,P(r.row.name),1)]),_:2},1032,["content"])]),_:1}),e(F,{prop:"protocol",label:"协议族",width:"120"},{header:t(()=>[a[18]||(a[18]=v("span",null,"协议族",-1)),e(W,{placement:"bottom",width:"160",trigger:"click",visible:I.value,"onUpdate:visible":a[3]||(a[3]=r=>I.value=r)},{reference:t(()=>[e(le,{color:E.value?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(J(oe))]),_:1},8,["color"])]),default:t(()=>[e(_e,{modelValue:E.value,"onUpdate:modelValue":a[2]||(a[2]=r=>E.value=r),onChange:s},{default:t(()=>[e(te,{label:""},{default:t(()=>a[15]||(a[15]=[c("全部")])),_:1,__:[15]}),e(te,{label:"IPV4"},{default:t(()=>a[16]||(a[16]=[c("IPv4")])),_:1,__:[16]}),e(te,{label:"IPV6"},{default:t(()=>a[17]||(a[17]=[c("IPv6")])),_:1,__:[17]})]),_:1},8,["modelValue"])]),_:1},8,["visible"])]),default:t(r=>[c(P(r.row.protocol==="IPV4"?"IPv4":"IPv6"),1)]),_:1}),e(F,{prop:"dataCenterId",label:"机房",width:"140"},{header:t(()=>[a[21]||(a[21]=v("span",null,"机房",-1)),e(W,{placement:"bottom",width:"200",trigger:"click",visible:k.value,"onUpdate:visible":a[5]||(a[5]=r=>k.value=r)},{reference:t(()=>[e(le,{color:A.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(J(oe))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:A.value,"onUpdate:modelValue":a[4]||(a[4]=r=>A.value=r),onChange:D},{default:t(()=>[(C(!0),z(H,null,T(u.value,r=>(C(),h(ae,{key:r.id,label:r.id},{default:t(()=>[c(P(r.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),v("div",Ze,[e(x,{size:"small",onClick:_},{default:t(()=>a[19]||(a[19]=[c("重置")])),_:1,__:[19]}),e(x,{size:"small",type:"primary",onClick:b},{default:t(()=>a[20]||(a[20]=[c("确定")])),_:1,__:[20]})])]),_:1},8,["visible"])]),default:t(r=>[v("span",null,P(f(r.row.dataCenterId)),1)]),_:1}),e(F,{prop:"status",label:"状态",width:"100"},{header:t(()=>[a[26]||(a[26]=v("span",null,"状态",-1)),e(W,{placement:"bottom",width:"160",trigger:"click",visible:N.value,"onUpdate:visible":a[7]||(a[7]=r=>N.value=r)},{reference:t(()=>[e(le,{color:S.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(J(oe))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:S.value,"onUpdate:modelValue":a[6]||(a[6]=r=>S.value=r),onChange:V},{default:t(()=>[e(ae,{label:"ENABLED"},{default:t(()=>a[22]||(a[22]=[c("启用")])),_:1,__:[22]}),e(ae,{label:"DISABLED"},{default:t(()=>a[23]||(a[23]=[c("禁用")])),_:1,__:[23]})]),_:1},8,["modelValue"]),v("div",et,[e(x,{size:"small",onClick:j},{default:t(()=>a[24]||(a[24]=[c("重置")])),_:1,__:[24]}),e(x,{size:"small",type:"primary",onClick:U},{default:t(()=>a[25]||(a[25]=[c("确定")])),_:1,__:[25]})])]),_:1},8,["visible"])]),default:t(r=>[e(ue,{type:r.row.status==="ENABLED"?"success":"danger"},{default:t(()=>[c(P(r.row.status==="ENABLED"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(F,{label:"区间数量",width:"100"},{default:t(r=>[c(P(r.row.ranges.length),1)]),_:1}),e(F,{label:"网段列表","min-width":"200"},{default:t(r=>[e(W,{placement:"right",trigger:"hover",width:400},{default:t(()=>[(C(!0),z(H,null,T(r.row.ranges,(O,ne)=>(C(),z("div",{key:ne,class:"mb-1"},P(O),1))),128))]),reference:t(()=>[v("div",tt,[(C(!0),z(H,null,T(r.row.ranges,(O,ne)=>(C(),z("div",{key:ne,class:"range-item-row"},P(O),1))),128)),r.row.ranges.length===0?(C(),z("div",lt," 无网段 ")):M("",!0)])]),_:2},1024)]),_:1}),e(F,{label:"已用/剩余IP",width:"120"},{default:t(r=>[c(P(r.row.usedCount)+"/"+P(r.row.availableCount),1)]),_:1}),e(F,{prop:"isAnycast",label:"Anycast",width:"80"},{default:t(r=>[e(ue,{type:r.row.isAnycast?"success":"info"},{default:t(()=>[c(P(r.row.isAnycast?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(F,{prop:"remark",label:"备注","min-width":"120","show-overflow-tooltip":""}),e(F,{label:"添加/修改信息","min-width":"180"},{default:t(r=>[v("div",null,"添加: "+P(r.row.createdAt)+" / "+P(r.row.createdBy),1),v("div",null,"修改: "+P(r.row.updatedAt)+" / "+P(r.row.updatedBy),1)]),_:1}),e(F,{label:"操作",width:"180",fixed:"right"},{default:t(r=>[e(x,{type:"primary",link:"",size:"small",onClick:O=>K(r.row)},{default:t(()=>a[27]||(a[27]=[c("编辑")])),_:2,__:[27]},1032,["onClick"]),e(x,{type:"danger",link:"",size:"small",onClick:O=>ee(r.row)},{default:t(()=>a[28]||(a[28]=[c("删除")])),_:2,__:[28]},1032,["onClick"]),e(x,{type:"info",link:"",size:"small",onClick:O=>w(r.row)},{default:t(()=>a[29]||(a[29]=[c("已分配IP")])),_:2,__:[29]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",at,[e(ye,{"current-page":d.page,"onUpdate:currentPage":a[8]||(a[8]=r=>d.page=r),"page-size":d.pageSize,"onUpdate:pageSize":a[9]||(a[9]=r=>d.pageSize=r),total:d.total,layout:"total, sizes, prev, pager, next, jumper",background:"","page-sizes":[10,20,50,100],onCurrentChange:L,onSizeChange:L},null,8,["current-page","page-size","total"])])]),_:1}),o.value?(C(),h(je,{key:0,visible:o.value,editData:g.value,dataCenters:u.value,onClose:q,onRefresh:Q},null,8,["visible","editData","dataCenters"])):M("",!0),y.value?(C(),h(Ke,{key:1,visible:y.value,pool:i.value,onClose:a[10]||(a[10]=r=>y.value=!1)},null,8,["visible","pool"])):M("",!0)])}}}),rt=se(nt,[["__scopeId","data-v-800ea910"]]);export{rt as default};
