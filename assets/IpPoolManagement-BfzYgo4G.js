import{p as se,a as k,c as Pe,q as ce,l as M,e as m,w as t,d as e,s as j,k as p,h as v,b as z,v as J,F as K,u as H,x as ke,g as C,y as De,E as fe,_ as re,t as P,r as me,o as Be,m as Y,n as Ee}from"./index-De3A7XfT.js";function Le(a,n){if(!a||a.trim()==="")return!1;if(a=a.trim(),console.log("Validating range:",a,"protocol:",n),n==="IPV4"){if(a.includes("/"))try{return Ne(a)}catch(u){return console.error("CIDR validation error:",u),!1}if(a.includes("-")){const[u,d]=a.split("-").map(y=>y.trim()),s=R(u),g=R(d);return console.log("Range validation result:",s&&g,"start:",s,"end:",g),s&&g}const c=R(a);return console.log("Single IP validation result:",c),c}else{if(a.includes("/"))try{return Fe(a)}catch(u){return console.error("IPv6 CIDR validation error:",u),!1}if(a.includes("-")){const[u,d]=a.split("-").map(y=>y.trim()),s=Z(u),g=Z(d);return console.log("IPv6 Range validation result:",s&&g),s&&g}const c=Z(a);return console.log("Single IPv6 validation result:",c),c}}function xe(a,n,c){if(c!=="IPV4")return!1;try{let d=function(I){if(!I||I.trim()==="")throw new Error("Empty range");if(I=I.trim(),I.includes("/")){const[D,A]=I.split("/");if(!R(D)||!ve(A))throw new Error("Invalid CIDR");const N=parseInt(A,10),F=u(D),f=~((1<<32-N)-1),r=F&f,B=r|~f;return[r,B]}if(I.includes("-")){const[D,A]=I.split("-").map(N=>N.trim());if(!R(D)||!R(A))throw new Error("Invalid IP range");return[u(D),u(A)]}if(!R(I))throw new Error("Invalid IP");const L=u(I);return[L,L]};const u=I=>I.split(".").reduce((L,D)=>(L<<8)+Number(D),0),[s,g]=d(a),[y,i]=d(n);return console.log("Overlap check:",a,n,[s,g],[y,i]),Math.max(s,y)<=Math.min(g,i)}catch(u){return console.error("Error in isRangeOverlap:",u),!1}}function R(a){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a)}function Z(a){return/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4})$/.test(a)}function ve(a){const n=parseInt(a,10);return!isNaN(n)&&n>=0&&n<=32}function ze(a){const n=parseInt(a,10);return!isNaN(n)&&n>=0&&n<=128}function Ne(a){if(!a.includes("/"))return!1;const[n,c]=a.split("/"),u=R(n),d=ve(c);return console.log("CIDR validation result:",u&&d,"IP:",u,"Prefix:",d),u&&d}function Fe(a){if(!a.includes("/"))return!1;const[n,c]=a.split("/"),u=Z(n),d=ze(c);return console.log("IPv6 CIDR validation result:",u&&d),u&&d}const Se=[{id:"dc1",name:"北京机房"},{id:"dc2",name:"上海机房"},{id:"dc3",name:"广州机房"}];let G=[{id:"LCG1000000001",name:"业务网池A",protocol:"IPV4",ranges:["192.168.1.0/24","192.168.2.1-192.168.2.100"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"测试用",createdAt:"2024-06-01 10:00",createdBy:"admin",updatedAt:"2024-06-01 10:00",updatedBy:"admin",usedCount:10,availableCount:244},{id:"LCG1000000002",name:"Anycast池",protocol:"IPV4",ranges:["10.0.0.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"",createdAt:"2024-06-02 11:00",createdBy:"user1",updatedAt:"2024-06-02 11:00",updatedBy:"user1",usedCount:0,availableCount:256},{id:"LCG1000000003",name:"防护网池",protocol:"IPV4",ranges:["172.16.0.0/16"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"用于DDoS防护",createdAt:"2024-06-03 09:30",createdBy:"admin",updatedAt:"2024-06-03 09:30",updatedBy:"admin",usedCount:25,availableCount:65511},{id:"LCG1000000004",name:"上海业务网池",protocol:"IPV4",ranges:["192.170.0.0/24","192.170.1.0/24"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"上海机房专用",createdAt:"2024-06-04 14:15",createdBy:"operator1",updatedAt:"2024-06-04 14:15",updatedBy:"operator1",usedCount:120,availableCount:392},{id:"LCG1000000005",name:"IPv6测试池",protocol:"IPV6",ranges:["2001:db8::/64"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"IPv6测试用途",createdAt:"2024-06-05 11:20",createdBy:"tester",updatedAt:"2024-06-05 11:20",updatedBy:"tester",usedCount:5,availableCount:18446744073709552e3},{id:"LCG1000000006",name:"广州备用池",protocol:"IPV4",ranges:["10.10.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"DISABLED",remark:"备用资源",createdAt:"2024-06-06 16:40",createdBy:"admin",updatedAt:"2024-06-06 16:40",updatedBy:"admin",usedCount:0,availableCount:65536},{id:"LCG1000000007",name:"Anycast全球加速",protocol:"IPV4",ranges:["103.21.244.0/24"],dataCenterId:"",isAnycast:!0,status:"ENABLED",remark:"全球加速网络",createdAt:"2024-06-07 08:30",createdBy:"network_admin",updatedAt:"2024-06-07 08:30",updatedBy:"network_admin",usedCount:200,availableCount:56},{id:"LCG1000000008",name:"内部测试网池",protocol:"IPV4",ranges:["192.168.100.0/24","192.168.101.0/24","192.168.102.0/24"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"仅供内部测试使用",createdAt:"2024-06-08 10:15",createdBy:"test_admin",updatedAt:"2024-06-08 10:15",updatedBy:"test_admin",usedCount:45,availableCount:723},{id:"LCG1000000009",name:"IPv6生产池",protocol:"IPV6",ranges:["2001:0db8:85a3::/64","2001:0db8:85a4::/64"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"IPv6生产环境",createdAt:"2024-06-09 13:45",createdBy:"prod_admin",updatedAt:"2024-06-09 13:45",updatedBy:"prod_admin",usedCount:120,availableCount:36893488147419103e3},{id:"LCG1000000010",name:"混合网池",protocol:"IPV4",ranges:["172.31.0.0/16","172.32.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"混合业务使用",createdAt:"2024-06-10 09:00",createdBy:"system",updatedAt:"2024-06-10 09:00",updatedBy:"system",usedCount:1024,availableCount:130048},{id:"LCG1000000011",name:"Anycast备用池",protocol:"IPV4",ranges:["103.22.200.0/24","103.22.201.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"Anycast备用资源",createdAt:"2024-06-11 14:30",createdBy:"network_admin",updatedAt:"2024-06-11 14:30",updatedBy:"network_admin",usedCount:0,availableCount:512}],Ue={LCG1000000001:[{segmentId:"192.168.1.0/24",ip:"192.168.1.10",ipInt:3232235786,clusterName:"集群A",instanceId:"ins-1",customerId:"cust-1",remark:""},{segmentId:"192.168.2.1-192.168.2.100",ip:"192.168.2.50",ipInt:3232236098,clusterName:"集群B",instanceId:"ins-2",customerId:"cust-2",remark:""}],LCG1000000002:[],LCG1000000003:[{segmentId:"172.16.0.0/16",ip:"172.16.1.1",ipInt:2886729985,clusterName:"防护集群A",instanceId:"ins-10",customerId:"cust-5",remark:"防火墙实例"}],LCG1000000004:[{segmentId:"192.170.0.0/24",ip:"192.170.0.10",ipInt:3232301066,clusterName:"上海集群A",instanceId:"ins-sh-1",customerId:"cust-3",remark:""},{segmentId:"192.170.0.0/24",ip:"192.170.0.11",ipInt:3232301067,clusterName:"上海集群A",instanceId:"ins-sh-2",customerId:"cust-3",remark:""}],LCG1000000005:[{segmentId:"2001:db8::/64",ip:"2001:db8::1",ipInt:0,clusterName:"IPv6测试集群",instanceId:"ins-ipv6-1",customerId:"cust-4",remark:"IPv6测试实例"}],LCG1000000007:[{segmentId:"103.21.244.0/24",ip:"103.21.244.10",ipInt:1732327434,clusterName:"全球加速集群",instanceId:"ins-cdn-1",customerId:"cust-10",remark:"CDN节点"}],LCG1000000008:[{segmentId:"192.168.100.0/24",ip:"192.168.100.5",ipInt:3232261125,clusterName:"测试集群",instanceId:"ins-test-1",customerId:"internal",remark:"测试用例"}]};function $e(a,n){let c=G.filter(g=>!(a.protocol&&g.protocol!==a.protocol||a.dataCenterId&&g.dataCenterId!==a.dataCenterId||a.status&&g.status!==a.status||a.name&&!g.name.includes(a.name)));const u=c.length,d=(n.page-1)*n.pageSize,s=d+n.pageSize;return c=c.slice(d,s),Promise.resolve({list:c,total:u})}function Re(){return Promise.resolve(Se)}function Ge(a){return G=G.filter(n=>n.id!==a),Promise.resolve()}function Me(a){return a.id?G=G.map(n=>n.id===a.id?{...n,...a}:n):(a.id="LCG"+(1e9+G.length+1),a.createdAt=a.updatedAt=new Date().toISOString().slice(0,16).replace("T"," "),a.createdBy=a.updatedBy="mockUser",a.usedCount=0,a.availableCount=256,G.push(a)),Promise.resolve()}function he(a,n,c){const u=G.find(i=>i.id===a);if(!u)return Promise.resolve({list:[],total:0,pool:null});let d=(Ue[a]||[]).filter(i=>!(n.ip&&!i.ip.includes(n.ip)||n.instanceId&&!i.instanceId.includes(n.instanceId)||n.customerId&&!i.customerId.includes(n.customerId)));const s=d.length,g=(c.page-1)*c.pageSize,y=g+c.pageSize;return d=d.slice(g,y),Promise.resolve({list:d,total:s,pool:u})}const je={class:"ranges-container"},qe={key:0,class:"empty-ranges"},Oe=se({__name:"IpPoolModal",props:{visible:Boolean,editData:Object,dataCenters:Array},emits:["close","refresh"],setup(a,{emit:n}){const c=a,u=n,d=k(),s=k({name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}),g={name:[{required:!0,message:"请输入网池名称",trigger:"blur"}],protocol:[{required:!0,message:"请选择协议族",trigger:"change"}],ranges:[{required:!0,validator:A,trigger:"blur"}],dataCenterId:[{required:!0,message:"请选择机房",trigger:"change",validator:N}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},y=Pe(()=>s.value.protocol==="IPV4"?"如192.168.1.0/24":"如2001:db8::/32");ce(()=>c.editData,f=>{f?s.value={...s.value,...f}:s.value={name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}},{immediate:!0});function i(){s.value.ranges.push("")}function I(f){s.value.ranges.splice(f,1)}function L(){s.value.ranges=[]}function D(f){f&&(s.value.dataCenterId=null)}function A(f,r,B){if(!r||r.length===0)return B(new Error("请至少添加一个区间"));const b=r.filter(V=>V&&V.trim()!=="");if(b.length===0)return B(new Error("请至少添加一个有效区间"));const _=[];for(const V of b)Le(V,s.value.protocol)||_.push(V);if(_.length>0)return B(new Error(`以下区间格式有误: ${_.join(", ")}`));if(s.value.protocol==="IPV4")try{for(let V=0;V<b.length;V++)for(let $=V+1;$<b.length;$++)if(xe(b[V],b[$],s.value.protocol))return B(new Error(`区间 ${b[V]} 与 ${b[$]} 存在重叠`))}catch(V){console.error("检查重叠出错:",V)}B()}function N(f,r,B){if(!s.value.isAnycast&&!r)return B(new Error("请选择机房"));B()}function F(){d.value.validate(async f=>{f&&(await Me(s.value),fe.success("保存成功"),u("close"),u("refresh"))})}return(f,r)=>{const B=m("el-input"),b=m("el-form-item"),_=m("el-radio"),V=m("el-radio-group"),$=m("el-icon"),q=m("el-button"),ee=m("el-switch"),te=m("el-option"),le=m("el-select"),E=m("el-form"),ae=m("el-drawer");return C(),M(ae,{"model-value":a.visible,title:a.editData?"编辑网池":"新建网池",size:"50%",onClose:r[7]||(r[7]=w=>f.$emit("close"))},{footer:t(()=>[e(q,{onClick:r[6]||(r[6]=w=>f.$emit("close"))},{default:t(()=>r[15]||(r[15]=[p("取消")])),_:1,__:[15]}),e(q,{type:"primary",onClick:F},{default:t(()=>r[16]||(r[16]=[p("保存")])),_:1,__:[16]})]),default:t(()=>[e(E,{model:s.value,rules:g,ref_key:"formRef",ref:d,"label-width":"100px"},{default:t(()=>[e(b,{label:"网池名称",prop:"name"},{default:t(()=>[e(B,{modelValue:s.value.name,"onUpdate:modelValue":r[0]||(r[0]=w=>s.value.name=w),maxlength:"32"},null,8,["modelValue"])]),_:1}),e(b,{label:"协议族",prop:"protocol"},{default:t(()=>[e(V,{modelValue:s.value.protocol,"onUpdate:modelValue":r[1]||(r[1]=w=>s.value.protocol=w),onChange:L},{default:t(()=>[e(_,{label:"IPV4"},{default:t(()=>r[8]||(r[8]=[p("IPv4")])),_:1,__:[8]}),e(_,{label:"IPV6"},{default:t(()=>r[9]||(r[9]=[p("IPv6")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"区间列表",prop:"ranges"},{default:t(()=>[v("div",je,[(C(!0),z(K,null,J(s.value.ranges,(w,h)=>(C(),z("div",{key:h,class:"range-item"},[e(B,{modelValue:s.value.ranges[h],"onUpdate:modelValue":W=>s.value.ranges[h]=W,placeholder:y.value},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(q,{type:"danger",size:"small",circle:"",onClick:W=>I(h),class:"remove-btn"},{default:t(()=>[e($,null,{default:t(()=>[e(H(De))]),_:1})]),_:2},1032,["onClick"])]))),128)),s.value.ranges.length===0?(C(),z("div",qe,r[10]||(r[10]=[v("span",{class:"text-gray-400"},"暂无区间，请添加",-1)]))):j("",!0),e(q,{type:"primary",onClick:i,size:"small",class:"add-btn"},{default:t(()=>[e($,null,{default:t(()=>[e(H(ke))]),_:1}),r[11]||(r[11]=p(" 添加区间 "))]),_:1,__:[11]}),r[12]||(r[12]=v("div",{class:"range-tips"},"支持单IP、IP区间、CIDR格式，例：192.168.1.1、192.168.1.1-192.168.1.100、192.168.1.0/24",-1))])]),_:1}),e(b,{label:"Anycast"},{default:t(()=>[e(ee,{modelValue:s.value.isAnycast,"onUpdate:modelValue":r[2]||(r[2]=w=>s.value.isAnycast=w),onChange:D},null,8,["modelValue"])]),_:1}),s.value.isAnycast?j("",!0):(C(),M(b,{key:0,label:"所属机房",prop:"dataCenterId"},{default:t(()=>[e(le,{modelValue:s.value.dataCenterId,"onUpdate:modelValue":r[3]||(r[3]=w=>s.value.dataCenterId=w),placeholder:"请选择机房"},{default:t(()=>[(C(!0),z(K,null,J(a.dataCenters,w=>(C(),M(te,{key:w.id,label:w.name,value:w.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),e(b,{label:"状态",prop:"status"},{default:t(()=>[e(V,{modelValue:s.value.status,"onUpdate:modelValue":r[4]||(r[4]=w=>s.value.status=w)},{default:t(()=>[e(_,{label:"ENABLED"},{default:t(()=>r[13]||(r[13]=[p("启用")])),_:1,__:[13]}),e(_,{label:"DISABLED"},{default:t(()=>r[14]||(r[14]=[p("禁用")])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"备注",prop:"remark"},{default:t(()=>[e(B,{modelValue:s.value.remark,"onUpdate:modelValue":r[5]||(r[5]=w=>s.value.remark=w),type:"textarea",maxlength:"128"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}}),Te=re(Oe,[["__scopeId","data-v-d26bb37d"]]),He={key:0,class:"pool-info"},Je={class:"info-row"},Ke={class:"ranges-list"},Qe={key:0,class:"text-gray-400"},We=se({__name:"IpPoolAllocatedDrawer",props:{visible:Boolean,pool:Object},setup(a){const n=a,c=k({ip:"",instanceId:"",customerId:""}),u=k([]),d=k({page:1,pageSize:20,total:0});async function s(){if(!n.pool)return;const{list:y,total:i,pool:I}=await he(n.pool.id,c.value,d.value);u.value=y,d.value.total=i,I&&I.ranges&&Object.assign(n.pool,I)}function g(){c.value={ip:"",instanceId:"",customerId:""},s()}return ce(()=>n.pool,y=>{y&&s()}),(y,i)=>{const I=m("el-tag"),L=m("el-divider"),D=m("el-input"),A=m("el-form-item"),N=m("el-button"),F=m("el-form"),f=m("el-table-column"),r=m("el-table"),B=m("el-pagination"),b=m("el-drawer");return C(),M(b,{"model-value":a.visible,title:"已分配IP列表",size:"60%",onClose:i[5]||(i[5]=_=>y.$emit("close"))},{default:t(()=>[a.pool?(C(),z("div",He,[i[9]||(i[9]=v("h3",null,"网池信息",-1)),v("div",Je,[i[6]||(i[6]=v("span",{class:"info-label"},"ID:",-1)),p(" "+P(a.pool.id)+" ",1),i[7]||(i[7]=v("span",{class:"info-label ml-4"},"名称:",-1)),p(" "+P(a.pool.name)+" ",1),i[8]||(i[8]=v("span",{class:"info-label ml-4"},"协议族:",-1)),p(" "+P(a.pool.protocol==="IPV4"?"IPv4":"IPv6"),1)]),i[10]||(i[10]=v("div",{class:"info-row"},[v("span",{class:"info-label"},"网段列表:")],-1)),v("div",Ke,[(C(!0),z(K,null,J(a.pool.ranges,(_,V)=>(C(),M(I,{key:V,class:"range-tag",size:"small"},{default:t(()=>[p(P(_),1)]),_:2},1024))),128)),a.pool.ranges.length===0?(C(),z("span",Qe,"无网段")):j("",!0)])])):j("",!0),e(L),e(F,{inline:!0,model:c.value,style:{"margin-bottom":"12px"}},{default:t(()=>[e(A,{label:"IP地址"},{default:t(()=>[e(D,{modelValue:c.value.ip,"onUpdate:modelValue":i[0]||(i[0]=_=>c.value.ip=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,{label:"实例ID"},{default:t(()=>[e(D,{modelValue:c.value.instanceId,"onUpdate:modelValue":i[1]||(i[1]=_=>c.value.instanceId=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,{label:"客户ID"},{default:t(()=>[e(D,{modelValue:c.value.customerId,"onUpdate:modelValue":i[2]||(i[2]=_=>c.value.customerId=_),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(A,null,{default:t(()=>[e(N,{type:"primary",onClick:s},{default:t(()=>i[11]||(i[11]=[p("查询")])),_:1,__:[11]}),e(N,{onClick:g},{default:t(()=>i[12]||(i[12]=[p("重置")])),_:1,__:[12]})]),_:1})]),_:1},8,["model"]),e(r,{data:u.value,style:{width:"100%"},"row-key":"ip"},{default:t(()=>[e(f,{prop:"segmentId",label:"网段ID","min-width":"120"}),e(f,{prop:"ip",label:"IP地址","min-width":"120"}),e(f,{prop:"ipInt",label:"IP地址int","min-width":"120"}),e(f,{prop:"clusterName",label:"所属逻辑集群","min-width":"120"}),e(f,{prop:"instanceId",label:"业务实例ID","min-width":"120"}),e(f,{prop:"customerId",label:"所属客户ID","min-width":"120"}),e(f,{prop:"remark",label:"备注","min-width":"120"})]),_:1},8,["data"]),e(B,{"current-page":d.value.page,"onUpdate:currentPage":i[3]||(i[3]=_=>d.value.page=_),"page-size":d.value.pageSize,"onUpdate:pageSize":i[4]||(i[4]=_=>d.value.pageSize=_),total:d.value.total,layout:"total, prev, pager, next, sizes","page-sizes":[10,20,50,100],onCurrentChange:s,onSizeChange:s,style:{"margin-top":"16px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1},8,["model-value"])}}}),Xe=re(We,[["__scopeId","data-v-f411241c"]]),Ye={class:"ip-pool-management"},Ze={class:"card-header"},et={class:"search-area"},tt={class:"ellipsis-cell"},lt={class:"mt-2 flex justify-end"},at={class:"mt-2 flex justify-end"},nt={class:"network-ranges"},ot={key:0,class:"text-gray-400"},st={class:"pagination-container"},rt=se({__name:"IpPoolManagement",setup(a){const n=me({protocol:"",dataCenterId:"",status:"",name:"",isAnycast:""}),c=k([]),u=k([]),d=me({page:1,pageSize:20,total:0}),s=k(!1),g=k(null),y=k(!1),i=k(null),I=k(!1),L=k(""),D=k(!1),A=k([]),N=k(!1),F=k([]),f=k(!1),r=k("");function B(U){const l=u.value.find(x=>x.id===U);return l?l.name:""}function b(){n.protocol=L.value,E()}function _(){}function V(){n.dataCenterId=A.value.join(","),E(),D.value=!1}function $(){A.value=[],n.dataCenterId="",E(),D.value=!1}function q(){}function ee(){n.status=F.value.join(","),E(),N.value=!1}function te(){F.value=[],n.status="",E(),N.value=!1}function le(){n.isAnycast=r.value!==""?String(r.value):"",E(),f.value=!1}async function E(){const U={...n,dataCenterId:n.dataCenterId,status:n.status},{list:l,total:x}=await $e(U,d);c.value=l,d.total=x}async function ae(){u.value=await Re()}function w(){n.name="",L.value="",A.value=[],F.value=[],r.value="",n.protocol="",n.dataCenterId="",n.status="",n.isAnycast="",E()}function h(U=null){g.value=U,s.value=!0}async function W(U){await Ee.confirm("确定要删除该网池吗？","提示",{type:"warning"}),await Ge(U.id),fe.success("删除成功"),E()}function ge(U){i.value=U,y.value=!0}function Ie(){s.value=!1}function _e(){E()}return Be(()=>{ae(),E()}),(U,l)=>{const x=m("el-button"),Ce=m("el-input"),ie=m("el-form-item"),ye=m("el-form"),S=m("el-table-column"),be=m("el-tooltip"),O=m("el-radio"),de=m("el-radio-group"),X=m("el-icon"),Q=m("el-popover"),ne=m("el-checkbox"),ue=m("el-checkbox-group"),pe=m("el-tag"),Ve=m("el-table"),we=m("el-pagination"),Ae=m("el-card");return C(),z("div",Ye,[e(Ae,{class:"box-card"},{header:t(()=>[v("div",Ze,[l[14]||(l[14]=v("span",null,"网池管理",-1)),e(x,{type:"primary",onClick:l[0]||(l[0]=o=>h())},{default:t(()=>l[13]||(l[13]=[p("新建网池")])),_:1,__:[13]})])]),default:t(()=>[v("div",et,[e(ye,{inline:!0,model:n},{default:t(()=>[e(ie,{label:"网池名称"},{default:t(()=>[e(Ce,{modelValue:n.name,"onUpdate:modelValue":l[1]||(l[1]=o=>n.name=o),placeholder:"请输入网池名称",clearable:"",style:{"max-width":"220px"}},null,8,["modelValue"])]),_:1}),e(ie,null,{default:t(()=>[e(x,{type:"primary",onClick:E},{default:t(()=>l[15]||(l[15]=[p("查询")])),_:1,__:[15]}),e(x,{onClick:w},{default:t(()=>l[16]||(l[16]=[p("重置")])),_:1,__:[16]})]),_:1})]),_:1},8,["model"])]),e(Ve,{data:c.value,style:{width:"100%","min-height":"500px","margin-top":"20px"},border:"",stripe:"","max-height":"700","header-cell-style":{position:"sticky",top:0,background:"#fff",zIndex:2},"row-class-name":"dense-row"},{empty:t(()=>l[36]||(l[36]=[v("div",{class:"text-gray-400 py-10 text-center"},"暂无数据",-1)])),default:t(()=>[e(S,{prop:"id",label:"ID",width:"180",fixed:"left"}),e(S,{prop:"name",label:"网池名称",width:"150"},{default:t(o=>[e(be,{effect:"dark",content:o.row.name,placement:"top"},{default:t(()=>[v("span",tt,P(o.row.name),1)]),_:2},1032,["content"])]),_:1}),e(S,{prop:"protocol",label:"协议族",width:"120"},{header:t(()=>[l[20]||(l[20]=v("span",null,"协议族",-1)),e(Q,{placement:"bottom",width:"160",trigger:"click",visible:I.value,"onUpdate:visible":l[3]||(l[3]=o=>I.value=o)},{reference:t(()=>[e(X,{color:L.value?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(H(Y))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:L.value,"onUpdate:modelValue":l[2]||(l[2]=o=>L.value=o),onChange:b},{default:t(()=>[e(O,{label:""},{default:t(()=>l[17]||(l[17]=[p("全部")])),_:1,__:[17]}),e(O,{label:"IPV4"},{default:t(()=>l[18]||(l[18]=[p("IPv4")])),_:1,__:[18]}),e(O,{label:"IPV6"},{default:t(()=>l[19]||(l[19]=[p("IPv6")])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1},8,["visible"])]),default:t(o=>[p(P(o.row.protocol==="IPV4"?"IPv4":"IPv6"),1)]),_:1}),e(S,{prop:"dataCenterId",label:"机房",width:"140"},{header:t(()=>[l[23]||(l[23]=v("span",null,"机房",-1)),e(Q,{placement:"bottom",width:"200",trigger:"click",visible:D.value,"onUpdate:visible":l[5]||(l[5]=o=>D.value=o)},{reference:t(()=>[e(X,{color:A.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(H(Y))]),_:1},8,["color"])]),default:t(()=>[e(ue,{modelValue:A.value,"onUpdate:modelValue":l[4]||(l[4]=o=>A.value=o),onChange:_},{default:t(()=>[(C(!0),z(K,null,J(u.value,o=>(C(),M(ne,{key:o.id,label:o.id},{default:t(()=>[p(P(o.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),v("div",lt,[e(x,{size:"small",onClick:$},{default:t(()=>l[21]||(l[21]=[p("重置")])),_:1,__:[21]}),e(x,{size:"small",type:"primary",onClick:V},{default:t(()=>l[22]||(l[22]=[p("确定")])),_:1,__:[22]})])]),_:1},8,["visible"])]),default:t(o=>[v("span",null,P(B(o.row.dataCenterId)),1)]),_:1}),e(S,{prop:"status",label:"状态",width:"100"},{header:t(()=>[l[28]||(l[28]=v("span",null,"状态",-1)),e(Q,{placement:"bottom",width:"160",trigger:"click",visible:N.value,"onUpdate:visible":l[7]||(l[7]=o=>N.value=o)},{reference:t(()=>[e(X,{color:F.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(H(Y))]),_:1},8,["color"])]),default:t(()=>[e(ue,{modelValue:F.value,"onUpdate:modelValue":l[6]||(l[6]=o=>F.value=o),onChange:q},{default:t(()=>[e(ne,{label:"ENABLED"},{default:t(()=>l[24]||(l[24]=[p("启用")])),_:1,__:[24]}),e(ne,{label:"DISABLED"},{default:t(()=>l[25]||(l[25]=[p("禁用")])),_:1,__:[25]})]),_:1},8,["modelValue"]),v("div",at,[e(x,{size:"small",onClick:te},{default:t(()=>l[26]||(l[26]=[p("重置")])),_:1,__:[26]}),e(x,{size:"small",type:"primary",onClick:ee},{default:t(()=>l[27]||(l[27]=[p("确定")])),_:1,__:[27]})])]),_:1},8,["visible"])]),default:t(o=>[e(pe,{type:o.row.status==="ENABLED"?"success":"danger"},{default:t(()=>[p(P(o.row.status==="ENABLED"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(S,{label:"区间数量",width:"100"},{default:t(o=>[p(P(o.row.ranges.length),1)]),_:1}),e(S,{label:"网段列表","min-width":"200"},{default:t(o=>[e(Q,{placement:"right",trigger:"hover",width:400},{default:t(()=>[(C(!0),z(K,null,J(o.row.ranges,(T,oe)=>(C(),z("div",{key:oe,class:"mb-1"},P(T),1))),128))]),reference:t(()=>[v("div",nt,[(C(!0),z(K,null,J(o.row.ranges,(T,oe)=>(C(),z("div",{key:oe,class:"range-item-row"},P(T),1))),128)),o.row.ranges.length===0?(C(),z("div",ot," 无网段 ")):j("",!0)])]),_:2},1024)]),_:1}),e(S,{label:"已用/剩余IP",width:"120"},{default:t(o=>[p(P(o.row.usedCount)+"/"+P(o.row.availableCount),1)]),_:1}),e(S,{prop:"isAnycast",label:"Anycast",width:"80"},{header:t(()=>[l[32]||(l[32]=v("span",null,"Anycast",-1)),e(Q,{placement:"bottom",width:"160",trigger:"click",visible:f.value,"onUpdate:visible":l[9]||(l[9]=o=>f.value=o)},{reference:t(()=>[e(X,{color:r.value!==""?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(H(Y))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=o=>r.value=o),onChange:le},{default:t(()=>[e(O,{label:""},{default:t(()=>l[29]||(l[29]=[p("全部")])),_:1,__:[29]}),e(O,{label:!0},{default:t(()=>l[30]||(l[30]=[p("是")])),_:1,__:[30]}),e(O,{label:!1},{default:t(()=>l[31]||(l[31]=[p("否")])),_:1,__:[31]})]),_:1},8,["modelValue"])]),_:1},8,["visible"])]),default:t(o=>[e(pe,{type:o.row.isAnycast?"success":"info"},{default:t(()=>[p(P(o.row.isAnycast?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(S,{prop:"remark",label:"备注","min-width":"120","show-overflow-tooltip":""}),e(S,{label:"添加/修改信息","min-width":"180"},{default:t(o=>[v("div",null,"添加: "+P(o.row.createdAt)+" / "+P(o.row.createdBy),1),v("div",null,"修改: "+P(o.row.updatedAt)+" / "+P(o.row.updatedBy),1)]),_:1}),e(S,{label:"操作",width:"180",fixed:"right"},{default:t(o=>[e(x,{type:"primary",link:"",size:"small",onClick:T=>h(o.row)},{default:t(()=>l[33]||(l[33]=[p("编辑")])),_:2,__:[33]},1032,["onClick"]),e(x,{type:"danger",link:"",size:"small",onClick:T=>W(o.row)},{default:t(()=>l[34]||(l[34]=[p("删除")])),_:2,__:[34]},1032,["onClick"]),e(x,{type:"info",link:"",size:"small",onClick:T=>ge(o.row)},{default:t(()=>l[35]||(l[35]=[p("已分配IP")])),_:2,__:[35]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",st,[e(we,{"current-page":d.page,"onUpdate:currentPage":l[10]||(l[10]=o=>d.page=o),"page-size":d.pageSize,"onUpdate:pageSize":l[11]||(l[11]=o=>d.pageSize=o),total:d.total,layout:"total, sizes, prev, pager, next, jumper",background:"","page-sizes":[10,20,50,100],onCurrentChange:E,onSizeChange:E},null,8,["current-page","page-size","total"])])]),_:1}),s.value?(C(),M(Te,{key:0,visible:s.value,editData:g.value,dataCenters:u.value,onClose:Ie,onRefresh:_e},null,8,["visible","editData","dataCenters"])):j("",!0),y.value?(C(),M(Xe,{key:1,visible:y.value,pool:i.value,onClose:l[12]||(l[12]=o=>y.value=!1)},null,8,["visible","pool"])):j("",!0)])}}}),dt=re(rt,[["__scopeId","data-v-dbf5dac3"]]);export{dt as default};
