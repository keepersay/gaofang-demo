import{_ as ie,r as $,a as c,c as re,o as me,b as ce,d as t,w as l,e as d,f as pe,g as j,h as v,i as fe,j as s,k as ve,t as T,E as C}from"./index-ClIzMk6g.js";const _e={class:"role-management"},ge={class:"card-header"},be={class:"search-area"},ke={class:"pagination-container"},ye={class:"dialog-footer"},we={class:"text-xs text-gray-500 mt-2"},Ce={__name:"RoleManagement",setup(Ve){function V(){const n=Date.now()%1e12,e=Math.floor(Math.random()*1024),o=Math.floor(Math.random()*4096);return`LCG${n}${e.toString().padStart(3,"0")}${o.toString().padStart(4,"0")}`}const r=$({name:"",status:""}),_=c([]),S=c(!1),i=$({currentPage:1,pageSize:10,total:0}),g=c(!1),D=c(""),z=c(),k=c(!1),x=c(null),y=c(!1),w=c(null),u=$({id:"",name:"",key:"",remark:"",status:"active",createTime:"",createAccount:"",updateTime:"",updateAccount:""}),B={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],key:[{required:!0,message:"请输入角色标识",trigger:"blur"}]},q=[{id:"menu-1",label:"配置管理",children:[{id:"menu-1-1",label:"地域管理"},{id:"menu-1-2",label:"逻辑集群"},{id:"menu-1-3",label:"逻辑集群组"},{id:"menu-1-4",label:"商品套餐"}]},{id:"menu-2",label:"网元管理",children:[{id:"menu-2-1",label:"ADS"},{id:"menu-2-2",label:"SLB"},{id:"menu-2-3",label:"WAF"},{id:"menu-2-4",label:"WAF-CC"},{id:"menu-2-5",label:"黑洞"},{id:"menu-2-6",label:"流量分析"}]},{id:"menu-3",label:"客户管理"},{id:"menu-4",label:"用户管理"},{id:"menu-5",label:"系统管理",children:[{id:"menu-5-1",label:"全局配置"},{id:"menu-5-2",label:"角色管理"},{id:"menu-5-3",label:"用户管理"}]}],E={label:"label",children:"children"},h=c([]),R=[{id:V(),name:"管理员",key:"admin",remark:"系统超级管理员，拥有所有权限",status:"active",createTime:"2024-01-01 10:00:00",createAccount:"system",updateTime:"2024-01-10 12:00:00",updateAccount:"system",resources:["menu-1","menu-2","menu-3","menu-4","menu-5"]},{id:V(),name:"普通用户",key:"user",remark:"普通业务操作员",status:"active",createTime:"2024-01-05 09:30:00",createAccount:"admin",updateTime:"2024-01-15 14:20:00",updateAccount:"admin",resources:["menu-1-1","menu-1-2","menu-3","menu-4"]},{id:V(),name:"访客",key:"guest",remark:"只读权限",status:"disabled",createTime:"2024-01-08 11:00:00",createAccount:"admin",updateTime:"2024-01-20 16:00:00",updateAccount:"admin",resources:["menu-1-1","menu-3"]}],A=()=>{S.value=!0,setTimeout(()=>{_.value=R,i.total=R.length,S.value=!1},500)},F=re(()=>{let n=_.value;if(r.name){const e=r.name.trim().toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(e))}return r.status&&(n=n.filter(e=>e.status===r.status)),n}),M=()=>{i.currentPage=1,A()},O=()=>{Object.assign(r,{name:"",status:""}),M()},N=()=>{D.value="新增角色",Object.assign(u,{id:"",name:"",key:"",remark:"",status:"active",createTime:"",createAccount:"",updateTime:"",updateAccount:""}),g.value=!0},W=n=>{D.value="编辑角色",Object.assign(u,n),g.value=!0},G=n=>{x.value=n,k.value=!0},K=()=>{const n=_.value.findIndex(e=>e.id===x.value.id);n>-1&&(_.value.splice(n,1),i.total--,C.success("删除成功")),k.value=!1},H=n=>{n.status=n.status==="active"?"disabled":"active",n.updateTime=new Date().toLocaleString(),n.updateAccount="current_user";const e=n.status==="active"?"启用":"禁用";C.success(`角色已${e}`)},J=()=>{z.value.validate(n=>{if(n){const e=new Date().toLocaleString(),o="current_user";if(u.id){const p=_.value.findIndex(f=>f.id===u.id);p>-1&&Object.assign(_.value[p],{...u,updateTime:e,updateAccount:o}),C.success("编辑成功")}else{const p={...u,id:V(),createTime:e,createAccount:o,updateTime:e,updateAccount:o,resources:[]};_.value.push(p),i.total++,C.success("新增成功")}g.value=!1}})},Q=n=>{w.value=n,h.value=[...n.resources||[]],y.value=!0},X=()=>{w.value&&(w.value.resources=[...h.value],w.value.updateTime=new Date().toLocaleString(),w.value.updateAccount="current_user",C.success("资源分配成功")),y.value=!1},Y=()=>{var n;(n=z.value)==null||n.resetFields()},Z=n=>{i.pageSize=n,A()},ee=n=>{i.currentPage=n,A()};return me(()=>{A()}),(n,e)=>{const o=d("el-button"),p=d("el-input"),f=d("el-form-item"),I=d("el-option"),te=d("el-select"),L=d("el-form"),m=d("el-table-column"),le=d("el-tag"),ae=d("el-table"),ne=d("el-pagination"),oe=d("el-card"),P=d("el-radio"),se=d("el-radio-group"),U=d("el-dialog"),ue=d("el-tree"),de=pe("loading");return j(),ce("div",_e,[t(oe,{class:"box-card"},{header:l(()=>[v("div",ge,[e[15]||(e[15]=v("span",null,"角色管理",-1)),t(o,{type:"primary",onClick:N},{default:l(()=>e[14]||(e[14]=[s("新增角色")])),_:1,__:[14]})])]),default:l(()=>[v("div",be,[t(L,{inline:!0,model:r,class:"search-form"},{default:l(()=>[t(f,{label:"角色名称"},{default:l(()=>[t(p,{modelValue:r.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.name=a),placeholder:"请输入角色名称",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"状态"},{default:l(()=>[t(te,{modelValue:r.status,"onUpdate:modelValue":e[1]||(e[1]=a=>r.status=a),placeholder:"请选择状态",clearable:""},{default:l(()=>[t(I,{label:"启用",value:"active"}),t(I,{label:"禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:l(()=>[t(o,{type:"primary",onClick:M},{default:l(()=>e[16]||(e[16]=[s("搜索")])),_:1,__:[16]}),t(o,{onClick:O},{default:l(()=>e[17]||(e[17]=[s("重置")])),_:1,__:[17]})]),_:1})]),_:1},8,["model"])]),fe((j(),ve(ae,{data:F.value,style:{width:"100%"},border:"",stripe:""},{default:l(()=>[t(m,{prop:"id",label:"ID",width:"220",fixed:"left"}),t(m,{prop:"name",label:"角色名称",width:"140"}),t(m,{prop:"key",label:"角色标识",width:"120"}),t(m,{prop:"remark",label:"描述",width:"200","show-overflow-tooltip":""}),t(m,{prop:"status",label:"状态",width:"100"},{default:l(a=>[t(le,{type:a.row.status==="active"?"success":"danger"},{default:l(()=>[s(T(a.row.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"createTime",label:"创建时间",width:"160"}),t(m,{prop:"createAccount",label:"创建人",width:"120"}),t(m,{prop:"updateTime",label:"修改时间",width:"160"}),t(m,{prop:"updateAccount",label:"修改人",width:"120"}),t(m,{label:"操作",width:"260",fixed:"right"},{default:l(a=>[t(o,{type:"primary",link:"",size:"small",onClick:b=>W(a.row)},{default:l(()=>e[18]||(e[18]=[s("编辑")])),_:2,__:[18]},1032,["onClick"]),t(o,{type:"info",link:"",size:"small",onClick:b=>Q(a.row)},{default:l(()=>e[19]||(e[19]=[s("分配资源")])),_:2,__:[19]},1032,["onClick"]),t(o,{type:a.row.status==="active"?"danger":"success",link:"",size:"small",onClick:b=>H(a.row)},{default:l(()=>[s(T(a.row.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),t(o,{type:"danger",link:"",size:"small",onClick:b=>G(a.row)},{default:l(()=>e[20]||(e[20]=[s("删除")])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[de,S.value]]),v("div",ke,[t(ne,{"current-page":i.currentPage,"onUpdate:currentPage":e[2]||(e[2]=a=>i.currentPage=a),"page-size":i.pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>i.pageSize=a),"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:Z,onCurrentChange:ee},null,8,["current-page","page-size","total"])])]),_:1}),t(U,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=a=>g.value=a),title:D.value,width:"500px",onClose:Y},{footer:l(()=>[v("span",ye,[t(o,{onClick:e[8]||(e[8]=a=>g.value=!1)},{default:l(()=>e[23]||(e[23]=[s("取消")])),_:1,__:[23]}),t(o,{type:"primary",onClick:J},{default:l(()=>e[24]||(e[24]=[s("确定")])),_:1,__:[24]})])]),default:l(()=>[t(L,{model:u,rules:B,ref_key:"formRef",ref:z,"label-width":"120px"},{default:l(()=>[t(f,{label:"角色名称",prop:"name"},{default:l(()=>[t(p,{modelValue:u.name,"onUpdate:modelValue":e[4]||(e[4]=a=>u.name=a),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"角色标识",prop:"key"},{default:l(()=>[t(p,{modelValue:u.key,"onUpdate:modelValue":e[5]||(e[5]=a=>u.key=a),placeholder:"如 admin、user"},null,8,["modelValue"])]),_:1}),t(f,{label:"描述",prop:"remark"},{default:l(()=>[t(p,{modelValue:u.remark,"onUpdate:modelValue":e[6]||(e[6]=a=>u.remark=a),type:"textarea",rows:2,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:l(()=>[t(se,{modelValue:u.status,"onUpdate:modelValue":e[7]||(e[7]=a=>u.status=a)},{default:l(()=>[t(P,{label:"active"},{default:l(()=>e[21]||(e[21]=[s("启用")])),_:1,__:[21]}),t(P,{label:"disabled"},{default:l(()=>e[22]||(e[22]=[s("禁用")])),_:1,__:[22]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(U,{modelValue:y.value,"onUpdate:modelValue":e[11]||(e[11]=a=>y.value=a),title:"分配资源",width:"400px"},{footer:l(()=>[t(o,{onClick:e[10]||(e[10]=a=>y.value=!1)},{default:l(()=>e[25]||(e[25]=[s("取消")])),_:1,__:[25]}),t(o,{type:"primary",onClick:X},{default:l(()=>e[26]||(e[26]=[s("保存")])),_:1,__:[26]})]),default:l(()=>[t(ue,{data:q,"show-checkbox":"","node-key":"id","default-checked-keys":h.value,props:E,style:{"max-height":"400px",overflow:"auto"}},null,8,["default-checked-keys"])]),_:1},8,["modelValue"]),t(U,{modelValue:k.value,"onUpdate:modelValue":e[13]||(e[13]=a=>k.value=a),title:"确认删除",width:"400px"},{footer:l(()=>[t(o,{onClick:e[12]||(e[12]=a=>k.value=!1)},{default:l(()=>e[29]||(e[29]=[s("取消")])),_:1,__:[29]}),t(o,{type:"danger",onClick:K},{default:l(()=>e[30]||(e[30]=[s("确认删除")])),_:1,__:[30]})]),default:l(()=>{var a,b;return[v("div",null,[e[27]||(e[27]=s("确定要删除角色 ")),v("b",null,T((a=x.value)==null?void 0:a.name),1),e[28]||(e[28]=s(" 吗？"))]),v("div",we,"ID: "+T((b=x.value)==null?void 0:b.id),1)]}),_:1},8,["modelValue"])])}}},Ae=ie(Ce,[["__scopeId","data-v-742255db"]]);export{Ae as default};
