import{s as re,a as w,c as Pe,n as ce,l as M,e as p,w as t,d as e,v as J,k as d,h as V,b as S,p as K,F as Q,u as T,x as ke,g as D,y as De,E as fe,_ as se,t as k,r as me,o as Be,m as Y,q as Ee}from"./index-CAY4V7FP.js";function Le(a,n){if(!a||a.trim()==="")return!1;if(a=a.trim(),console.log("Validating range:",a,"protocol:",n),n==="IPV4"){if(a.includes("/"))try{return ze(a)}catch(u){return console.error("CIDR validation error:",u),!1}if(a.includes("-")){const[u,i]=a.split("-").map(I=>I.trim()),r=R(u),v=R(i);return console.log("Range validation result:",r&&v,"start:",r,"end:",v),r&&v}const m=R(a);return console.log("Single IP validation result:",m),m}else{if(a.includes("/"))try{return Fe(a)}catch(u){return console.error("IPv6 CIDR validation error:",u),!1}if(a.includes("-")){const[u,i]=a.split("-").map(I=>I.trim()),r=Z(u),v=Z(i);return console.log("IPv6 Range validation result:",r&&v),r&&v}const m=Z(a);return console.log("Single IPv6 validation result:",m),m}}function xe(a,n,m){if(m!=="IPV4")return!1;try{let i=function(g){if(!g||g.trim()==="")throw new Error("Empty range");if(g=g.trim(),g.includes("/")){const[b,B]=g.split("/");if(!R(b)||!ve(B))throw new Error("Invalid CIDR");const z=parseInt(B,10),E=u(b),_=~((1<<32-z)-1),s=E&_,A=s|~_;return[s,A]}if(g.includes("-")){const[b,B]=g.split("-").map(z=>z.trim());if(!R(b)||!R(B))throw new Error("Invalid IP range");return[u(b),u(B)]}if(!R(g))throw new Error("Invalid IP");const L=u(g);return[L,L]};const u=g=>g.split(".").reduce((L,b)=>(L<<8)+Number(b),0),[r,v]=i(a),[I,c]=i(n);return console.log("Overlap check:",a,n,[r,v],[I,c]),Math.max(r,I)<=Math.min(v,c)}catch(u){return console.error("Error in isRangeOverlap:",u),!1}}function R(a){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a)}function Z(a){return/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4})$/.test(a)}function ve(a){const n=parseInt(a,10);return!isNaN(n)&&n>=0&&n<=32}function Ne(a){const n=parseInt(a,10);return!isNaN(n)&&n>=0&&n<=128}function ze(a){if(!a.includes("/"))return!1;const[n,m]=a.split("/"),u=R(n),i=ve(m);return console.log("CIDR validation result:",u&&i,"IP:",u,"Prefix:",i),u&&i}function Fe(a){if(!a.includes("/"))return!1;const[n,m]=a.split("/"),u=Z(n),i=Ne(m);return console.log("IPv6 CIDR validation result:",u&&i),u&&i}const Se=[{id:"dc1",name:"北京机房"},{id:"dc2",name:"上海机房"},{id:"dc3",name:"广州机房"}];let G=[{id:"LCG1000000001",name:"业务网池A",protocol:"IPV4",ranges:["192.168.1.0/24","192.168.2.1-192.168.2.100"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"测试用",createdAt:"2024-06-01 10:00",createdBy:"admin",updatedAt:"2024-06-01 10:00",updatedBy:"admin",usedCount:10,availableCount:244},{id:"LCG1000000002",name:"Anycast池",protocol:"IPV4",ranges:["10.0.0.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"",createdAt:"2024-06-02 11:00",createdBy:"user1",updatedAt:"2024-06-02 11:00",updatedBy:"user1",usedCount:0,availableCount:256},{id:"LCG1000000003",name:"防护网池",protocol:"IPV4",ranges:["172.16.0.0/16"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"用于DDoS防护",createdAt:"2024-06-03 09:30",createdBy:"admin",updatedAt:"2024-06-03 09:30",updatedBy:"admin",usedCount:25,availableCount:65511},{id:"LCG1000000004",name:"上海业务网池",protocol:"IPV4",ranges:["192.170.0.0/24","192.170.1.0/24"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"上海机房专用",createdAt:"2024-06-04 14:15",createdBy:"operator1",updatedAt:"2024-06-04 14:15",updatedBy:"operator1",usedCount:120,availableCount:392},{id:"LCG1000000005",name:"IPv6测试池",protocol:"IPV6",ranges:["2001:db8::/64"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"IPv6测试用途",createdAt:"2024-06-05 11:20",createdBy:"tester",updatedAt:"2024-06-05 11:20",updatedBy:"tester",usedCount:5,availableCount:18446744073709552e3},{id:"LCG1000000006",name:"广州备用池",protocol:"IPV4",ranges:["10.10.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"DISABLED",remark:"备用资源",createdAt:"2024-06-06 16:40",createdBy:"admin",updatedAt:"2024-06-06 16:40",updatedBy:"admin",usedCount:0,availableCount:65536},{id:"LCG1000000007",name:"Anycast全球加速",protocol:"IPV4",ranges:["103.21.244.0/24"],dataCenterId:"",isAnycast:!0,status:"ENABLED",remark:"全球加速网络",createdAt:"2024-06-07 08:30",createdBy:"network_admin",updatedAt:"2024-06-07 08:30",updatedBy:"network_admin",usedCount:200,availableCount:56},{id:"LCG1000000008",name:"内部测试网池",protocol:"IPV4",ranges:["192.168.100.0/24","192.168.101.0/24","192.168.102.0/24"],dataCenterId:"dc1",isAnycast:!1,status:"ENABLED",remark:"仅供内部测试使用",createdAt:"2024-06-08 10:15",createdBy:"test_admin",updatedAt:"2024-06-08 10:15",updatedBy:"test_admin",usedCount:45,availableCount:723},{id:"LCG1000000009",name:"IPv6生产池",protocol:"IPV6",ranges:["2001:0db8:85a3::/64","2001:0db8:85a4::/64"],dataCenterId:"dc2",isAnycast:!1,status:"ENABLED",remark:"IPv6生产环境",createdAt:"2024-06-09 13:45",createdBy:"prod_admin",updatedAt:"2024-06-09 13:45",updatedBy:"prod_admin",usedCount:120,availableCount:36893488147419103e3},{id:"LCG1000000010",name:"混合网池",protocol:"IPV4",ranges:["172.31.0.0/16","172.32.0.0/16"],dataCenterId:"dc3",isAnycast:!1,status:"ENABLED",remark:"混合业务使用",createdAt:"2024-06-10 09:00",createdBy:"system",updatedAt:"2024-06-10 09:00",updatedBy:"system",usedCount:1024,availableCount:130048},{id:"LCG1000000011",name:"Anycast备用池",protocol:"IPV4",ranges:["103.22.200.0/24","103.22.201.0/24"],dataCenterId:"",isAnycast:!0,status:"DISABLED",remark:"Anycast备用资源",createdAt:"2024-06-11 14:30",createdBy:"network_admin",updatedAt:"2024-06-11 14:30",updatedBy:"network_admin",usedCount:0,availableCount:512}],Ue={LCG1000000001:[{segmentId:"192.168.1.0/24",ip:"192.168.1.10",ipInt:3232235786,clusterName:"集群A",instanceId:"ins-1",customerId:"cust-1",remark:""},{segmentId:"192.168.2.1-192.168.2.100",ip:"192.168.2.50",ipInt:3232236098,clusterName:"集群B",instanceId:"ins-2",customerId:"cust-2",remark:""}],LCG1000000002:[],LCG1000000003:[{segmentId:"172.16.0.0/16",ip:"172.16.1.1",ipInt:2886729985,clusterName:"防护集群A",instanceId:"ins-10",customerId:"cust-5",remark:"防火墙实例"}],LCG1000000004:[{segmentId:"192.170.0.0/24",ip:"192.170.0.10",ipInt:3232301066,clusterName:"上海集群A",instanceId:"ins-sh-1",customerId:"cust-3",remark:""},{segmentId:"192.170.0.0/24",ip:"192.170.0.11",ipInt:3232301067,clusterName:"上海集群A",instanceId:"ins-sh-2",customerId:"cust-3",remark:""}],LCG1000000005:[{segmentId:"2001:db8::/64",ip:"2001:db8::1",ipInt:0,clusterName:"IPv6测试集群",instanceId:"ins-ipv6-1",customerId:"cust-4",remark:"IPv6测试实例"}],LCG1000000007:[{segmentId:"103.21.244.0/24",ip:"103.21.244.10",ipInt:1732327434,clusterName:"全球加速集群",instanceId:"ins-cdn-1",customerId:"cust-10",remark:"CDN节点"}],LCG1000000008:[{segmentId:"192.168.100.0/24",ip:"192.168.100.5",ipInt:3232261125,clusterName:"测试集群",instanceId:"ins-test-1",customerId:"internal",remark:"测试用例"}]};function $e(a,n){let m=G.filter(v=>!(a.protocol&&v.protocol!==a.protocol||a.dataCenterId&&v.dataCenterId!==a.dataCenterId||a.status&&v.status!==a.status||a.name&&!v.name.includes(a.name)||a.isAnycast!==void 0&&a.isAnycast!==""&&v.isAnycast!==(a.isAnycast==="true")));const u=m.length,i=(n.page-1)*n.pageSize,r=i+n.pageSize;return m=m.slice(i,r),Promise.resolve({list:m,total:u})}function Re(){return Promise.resolve(Se)}function Ge(a){return G=G.filter(n=>n.id!==a),Promise.resolve()}function he(a){return a.id?G=G.map(n=>n.id===a.id?{...n,...a}:n):(a.id="LCG"+(1e9+G.length+1),a.createdAt=a.updatedAt=new Date().toISOString().slice(0,16).replace("T"," "),a.createdBy=a.updatedBy="mockUser",a.usedCount=0,a.availableCount=256,G.push(a)),Promise.resolve()}function Me(a,n,m){const u=G.find(c=>c.id===a);if(!u)return Promise.resolve({list:[],total:0,pool:null});let i=(Ue[a]||[]).filter(c=>!(n.ip&&!c.ip.includes(n.ip)||n.instanceId&&!c.instanceId.includes(n.instanceId)||n.customerId&&!c.customerId.includes(n.customerId)));const r=i.length,v=(m.page-1)*m.pageSize,I=v+m.pageSize;return i=i.slice(v,I),Promise.resolve({list:i,total:r,pool:u})}const je={class:"ranges-container"},qe={key:0,class:"empty-ranges"},Oe=re({__name:"IpPoolModal",props:{visible:Boolean,editData:Object,dataCenters:Array},emits:["close","refresh"],setup(a,{emit:n}){const m=a,u=n,i=w(),r=w({name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}),v={name:[{required:!0,message:"请输入网池名称",trigger:"blur"}],protocol:[{required:!0,message:"请选择协议族",trigger:"change"}],ranges:[{required:!0,validator:B,trigger:"blur"}],dataCenterId:[{required:!0,message:"请选择机房",trigger:"change",validator:z}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},I=Pe(()=>r.value.protocol==="IPV4"?"如192.168.1.0/24":"如2001:db8::/32");ce(()=>m.editData,_=>{_?r.value={...r.value,..._}:r.value={name:"",protocol:"IPV4",ranges:[],dataCenterId:null,isAnycast:!1,status:"ENABLED",remark:""}},{immediate:!0});function c(){r.value.ranges.push("")}function g(_){r.value.ranges.splice(_,1)}function L(){r.value.ranges=[]}function b(_){_&&(r.value.dataCenterId=null)}function B(_,s,A){if(!s||s.length===0)return A(new Error("请至少添加一个区间"));const C=s.filter(P=>P&&P.trim()!=="");if(C.length===0)return A(new Error("请至少添加一个有效区间"));const f=[];for(const P of C)Le(P,r.value.protocol)||f.push(P);if(f.length>0)return A(new Error(`以下区间格式有误: ${f.join(", ")}`));if(r.value.protocol==="IPV4")try{for(let P=0;P<C.length;P++)for(let $=P+1;$<C.length;$++)if(xe(C[P],C[$],r.value.protocol))return A(new Error(`区间 ${C[P]} 与 ${C[$]} 存在重叠`))}catch(P){console.error("检查重叠出错:",P)}A()}function z(_,s,A){if(!r.value.isAnycast&&!s)return A(new Error("请选择机房"));A()}function E(){i.value.validate(async _=>{_&&(await he(r.value),fe.success("保存成功"),u("close"),u("refresh"))})}return(_,s)=>{const A=p("el-input"),C=p("el-form-item"),f=p("el-radio"),P=p("el-radio-group"),$=p("el-icon"),j=p("el-button"),ee=p("el-switch"),te=p("el-option"),le=p("el-select"),x=p("el-form"),ae=p("el-drawer");return D(),M(ae,{"model-value":a.visible,title:a.editData?"编辑网池":"新建网池",size:"50%",onClose:s[7]||(s[7]=y=>_.$emit("close"))},{footer:t(()=>[e(j,{onClick:s[6]||(s[6]=y=>_.$emit("close"))},{default:t(()=>s[15]||(s[15]=[d("取消")])),_:1,__:[15]}),e(j,{type:"primary",onClick:E},{default:t(()=>s[16]||(s[16]=[d("保存")])),_:1,__:[16]})]),default:t(()=>[e(x,{model:r.value,rules:v,ref_key:"formRef",ref:i,"label-width":"100px"},{default:t(()=>[e(C,{label:"网池名称",prop:"name"},{default:t(()=>[e(A,{modelValue:r.value.name,"onUpdate:modelValue":s[0]||(s[0]=y=>r.value.name=y),maxlength:"32"},null,8,["modelValue"])]),_:1}),e(C,{label:"协议族",prop:"protocol"},{default:t(()=>[e(P,{modelValue:r.value.protocol,"onUpdate:modelValue":s[1]||(s[1]=y=>r.value.protocol=y),onChange:L},{default:t(()=>[e(f,{label:"IPV4"},{default:t(()=>s[8]||(s[8]=[d("IPv4")])),_:1,__:[8]}),e(f,{label:"IPV6"},{default:t(()=>s[9]||(s[9]=[d("IPv6")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"区间列表",prop:"ranges"},{default:t(()=>[V("div",je,[(D(!0),S(Q,null,K(r.value.ranges,(y,h)=>(D(),S("div",{key:h,class:"range-item"},[e(A,{modelValue:r.value.ranges[h],"onUpdate:modelValue":W=>r.value.ranges[h]=W,placeholder:I.value},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(j,{type:"danger",size:"small",circle:"",onClick:W=>g(h),class:"remove-btn"},{default:t(()=>[e($,null,{default:t(()=>[e(T(De))]),_:1})]),_:2},1032,["onClick"])]))),128)),r.value.ranges.length===0?(D(),S("div",qe,s[10]||(s[10]=[V("span",{class:"text-gray-400"},"暂无区间，请添加",-1)]))):J("",!0),e(j,{type:"primary",onClick:c,size:"small",class:"add-btn"},{default:t(()=>[e($,null,{default:t(()=>[e(T(ke))]),_:1}),s[11]||(s[11]=d(" 添加区间 "))]),_:1,__:[11]}),s[12]||(s[12]=V("div",{class:"range-tips"},"支持单IP、IP区间、CIDR格式，例：192.168.1.1、192.168.1.1-192.168.1.100、192.168.1.0/24",-1))])]),_:1}),e(C,{label:"Anycast"},{default:t(()=>[e(ee,{modelValue:r.value.isAnycast,"onUpdate:modelValue":s[2]||(s[2]=y=>r.value.isAnycast=y),onChange:b},null,8,["modelValue"])]),_:1}),r.value.isAnycast?J("",!0):(D(),M(C,{key:0,label:"所属机房",prop:"dataCenterId"},{default:t(()=>[e(le,{modelValue:r.value.dataCenterId,"onUpdate:modelValue":s[3]||(s[3]=y=>r.value.dataCenterId=y),placeholder:"请选择机房"},{default:t(()=>[(D(!0),S(Q,null,K(a.dataCenters,y=>(D(),M(te,{key:y.id,label:y.name,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),e(C,{label:"状态",prop:"status"},{default:t(()=>[e(P,{modelValue:r.value.status,"onUpdate:modelValue":s[4]||(s[4]=y=>r.value.status=y)},{default:t(()=>[e(f,{label:"ENABLED"},{default:t(()=>s[13]||(s[13]=[d("启用")])),_:1,__:[13]}),e(f,{label:"DISABLED"},{default:t(()=>s[14]||(s[14]=[d("禁用")])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"备注",prop:"remark"},{default:t(()=>[e(A,{modelValue:r.value.remark,"onUpdate:modelValue":s[5]||(s[5]=y=>r.value.remark=y),type:"textarea",maxlength:"128"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}}),Te=se(Oe,[["__scopeId","data-v-d26bb37d"]]),He=re({__name:"IpPoolAllocatedDrawer",props:{visible:Boolean,pool:Object},setup(a){const n=a,m=w({ip:"",instanceId:"",customerId:""}),u=w([]),i=w({page:1,pageSize:20,total:0});async function r(){if(!n.pool)return;const{list:I,total:c,pool:g}=await Me(n.pool.id,m.value,i.value);u.value=I,i.value.total=c,g&&g.ranges&&Object.assign(n.pool,g)}function v(){m.value={ip:"",instanceId:"",customerId:""},r()}return ce(()=>n.pool,I=>{I&&r()}),(I,c)=>{var C;const g=p("el-divider"),L=p("el-input"),b=p("el-form-item"),B=p("el-button"),z=p("el-form"),E=p("el-table-column"),_=p("el-table"),s=p("el-pagination"),A=p("el-drawer");return D(),M(A,{"model-value":a.visible,title:`已分配IP列表 - ${((C=a.pool)==null?void 0:C.name)||""}`,size:"60%",onClose:c[5]||(c[5]=f=>I.$emit("close"))},{default:t(()=>[e(g),e(z,{inline:!0,model:m.value,style:{"margin-bottom":"12px"}},{default:t(()=>[e(b,{label:"IP地址"},{default:t(()=>[e(L,{modelValue:m.value.ip,"onUpdate:modelValue":c[0]||(c[0]=f=>m.value.ip=f),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(b,{label:"实例ID"},{default:t(()=>[e(L,{modelValue:m.value.instanceId,"onUpdate:modelValue":c[1]||(c[1]=f=>m.value.instanceId=f),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(b,{label:"客户ID"},{default:t(()=>[e(L,{modelValue:m.value.customerId,"onUpdate:modelValue":c[2]||(c[2]=f=>m.value.customerId=f),placeholder:"支持模糊查询"},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(B,{type:"primary",onClick:r},{default:t(()=>c[6]||(c[6]=[d("查询")])),_:1,__:[6]}),e(B,{onClick:v},{default:t(()=>c[7]||(c[7]=[d("重置")])),_:1,__:[7]})]),_:1})]),_:1},8,["model"]),e(_,{data:u.value,style:{width:"100%"},"row-key":"ip"},{default:t(()=>[e(E,{prop:"ip",label:"IP地址","min-width":"120"}),e(E,{prop:"segment",label:"所属网段","min-width":"150"},{default:t(f=>[d(k(f.row.segment||f.row.segmentId||"-"),1)]),_:1}),e(E,{prop:"clusterName",label:"逻辑集群","min-width":"120"}),e(E,{prop:"instanceName",label:"业务实例","min-width":"150"},{default:t(f=>[d(k(f.row.instanceName||f.row.instanceId||"-"),1)]),_:1}),e(E,{prop:"customerName",label:"所属客户","min-width":"150"},{default:t(f=>[d(k(f.row.customerName||f.row.customerId||"-"),1)]),_:1}),e(E,{prop:"remark",label:"备注","min-width":"120"})]),_:1},8,["data"]),e(s,{"current-page":i.value.page,"onUpdate:currentPage":c[3]||(c[3]=f=>i.value.page=f),"page-size":i.value.pageSize,"onUpdate:pageSize":c[4]||(c[4]=f=>i.value.pageSize=f),total:i.value.total,layout:"total, prev, pager, next, sizes","page-sizes":[10,20,50,100],onCurrentChange:r,onSizeChange:r,style:{"margin-top":"16px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1},8,["model-value","title"])}}}),Je=se(He,[["__scopeId","data-v-9fc444ca"]]),Ke={class:"ip-pool-management"},Qe={class:"card-header"},We={class:"search-area"},Xe={class:"ellipsis-cell"},Ye={class:"mt-2 flex justify-end"},Ze={class:"mt-2 flex justify-end"},et={class:"network-ranges"},tt={key:0,class:"text-gray-400"},lt={class:"pagination-container"},at=re({__name:"IpPoolManagement",setup(a){const n=me({protocol:"",dataCenterId:"",status:"",name:"",isAnycast:""}),m=w([]),u=w([]),i=me({page:1,pageSize:20,total:0}),r=w(!1),v=w(null),I=w(!1),c=w(null),g=w(!1),L=w(""),b=w(!1),B=w([]),z=w(!1),E=w([]),_=w(!1),s=w("");function A(U){const l=u.value.find(N=>N.id===U);return l?l.name:""}function C(){n.protocol=L.value,x()}function f(){}function P(){n.dataCenterId=B.value.join(","),x(),b.value=!1}function $(){B.value=[],n.dataCenterId="",x(),b.value=!1}function j(){}function ee(){n.status=E.value.join(","),x(),z.value=!1}function te(){E.value=[],n.status="",x(),z.value=!1}function le(){n.isAnycast=s.value!==""?String(s.value):"",x(),_.value=!1}async function x(){const U={...n,dataCenterId:n.dataCenterId,status:n.status},{list:l,total:N}=await $e(U,i);m.value=l,i.total=N}async function ae(){u.value=await Re()}function y(){n.name="",L.value="",B.value=[],E.value=[],s.value="",n.protocol="",n.dataCenterId="",n.status="",n.isAnycast="",x()}function h(U=null){v.value=U,r.value=!0}async function W(U){await Ee.confirm("确定要删除该网池吗？","提示",{type:"warning"}),await Ge(U.id),fe.success("删除成功"),x()}function ge(U){c.value=U,I.value=!0}function _e(){r.value=!1}function Ie(){x()}return Be(()=>{ae(),x()}),(U,l)=>{const N=p("el-button"),Ce=p("el-input"),ie=p("el-form-item"),ye=p("el-form"),F=p("el-table-column"),be=p("el-tooltip"),q=p("el-radio"),ue=p("el-radio-group"),X=p("el-icon"),H=p("el-popover"),ne=p("el-checkbox"),de=p("el-checkbox-group"),pe=p("el-tag"),Ve=p("el-table"),we=p("el-pagination"),Ae=p("el-card");return D(),S("div",Ke,[e(Ae,{class:"box-card"},{header:t(()=>[V("div",Qe,[l[14]||(l[14]=V("span",null,"网池",-1)),e(N,{type:"primary",onClick:l[0]||(l[0]=o=>h())},{default:t(()=>l[13]||(l[13]=[d("新建网池")])),_:1,__:[13]})])]),default:t(()=>[V("div",We,[e(ye,{inline:!0,model:n},{default:t(()=>[e(ie,{label:"网池名称"},{default:t(()=>[e(Ce,{modelValue:n.name,"onUpdate:modelValue":l[1]||(l[1]=o=>n.name=o),placeholder:"请输入网池名称",clearable:"",style:{"max-width":"220px"}},null,8,["modelValue"])]),_:1}),e(ie,null,{default:t(()=>[e(N,{type:"primary",onClick:x},{default:t(()=>l[15]||(l[15]=[d("查询")])),_:1,__:[15]}),e(N,{onClick:y},{default:t(()=>l[16]||(l[16]=[d("重置")])),_:1,__:[16]})]),_:1})]),_:1},8,["model"])]),e(Ve,{data:m.value,style:{width:"100%","min-height":"500px","margin-top":"20px"},border:"",stripe:"","max-height":"700","header-cell-style":{position:"sticky",top:0,background:"#fff",zIndex:2},"row-class-name":"dense-row"},{empty:t(()=>l[36]||(l[36]=[V("div",{class:"text-gray-400 py-10 text-center"},"暂无数据",-1)])),default:t(()=>[e(F,{prop:"id",label:"ID",width:"180",fixed:"left"}),e(F,{prop:"name",label:"网池名称",width:"150"},{default:t(o=>[e(be,{effect:"dark",content:o.row.name,placement:"top"},{default:t(()=>[V("span",Xe,k(o.row.name),1)]),_:2},1032,["content"])]),_:1}),e(F,{prop:"protocol",label:"协议族",width:"120"},{header:t(()=>[l[20]||(l[20]=V("span",null,"协议族",-1)),e(H,{placement:"bottom",width:"160",trigger:"click",visible:g.value,"onUpdate:visible":l[3]||(l[3]=o=>g.value=o)},{reference:t(()=>[e(X,{color:L.value?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(T(Y))]),_:1},8,["color"])]),default:t(()=>[e(ue,{modelValue:L.value,"onUpdate:modelValue":l[2]||(l[2]=o=>L.value=o),onChange:C},{default:t(()=>[e(q,{label:""},{default:t(()=>l[17]||(l[17]=[d("全部")])),_:1,__:[17]}),e(q,{label:"IPV4"},{default:t(()=>l[18]||(l[18]=[d("IPv4")])),_:1,__:[18]}),e(q,{label:"IPV6"},{default:t(()=>l[19]||(l[19]=[d("IPv6")])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1},8,["visible"])]),default:t(o=>[d(k(o.row.protocol==="IPV4"?"IPv4":"IPv6"),1)]),_:1}),e(F,{prop:"dataCenterId",label:"机房",width:"140"},{header:t(()=>[l[23]||(l[23]=V("span",null,"机房",-1)),e(H,{placement:"bottom",width:"200",trigger:"click",visible:b.value,"onUpdate:visible":l[5]||(l[5]=o=>b.value=o)},{reference:t(()=>[e(X,{color:B.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(T(Y))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:B.value,"onUpdate:modelValue":l[4]||(l[4]=o=>B.value=o),onChange:f},{default:t(()=>[(D(!0),S(Q,null,K(u.value,o=>(D(),M(ne,{key:o.id,label:o.id},{default:t(()=>[d(k(o.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),V("div",Ye,[e(N,{size:"small",onClick:$},{default:t(()=>l[21]||(l[21]=[d("重置")])),_:1,__:[21]}),e(N,{size:"small",type:"primary",onClick:P},{default:t(()=>l[22]||(l[22]=[d("确定")])),_:1,__:[22]})])]),_:1},8,["visible"])]),default:t(o=>[V("span",null,k(A(o.row.dataCenterId)),1)]),_:1}),e(F,{prop:"status",label:"状态",width:"100"},{header:t(()=>[l[28]||(l[28]=V("span",null,"状态",-1)),e(H,{placement:"bottom",width:"160",trigger:"click",visible:z.value,"onUpdate:visible":l[7]||(l[7]=o=>z.value=o)},{reference:t(()=>[e(X,{color:E.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(T(Y))]),_:1},8,["color"])]),default:t(()=>[e(de,{modelValue:E.value,"onUpdate:modelValue":l[6]||(l[6]=o=>E.value=o),onChange:j},{default:t(()=>[e(ne,{label:"ENABLED"},{default:t(()=>l[24]||(l[24]=[d("启用")])),_:1,__:[24]}),e(ne,{label:"DISABLED"},{default:t(()=>l[25]||(l[25]=[d("禁用")])),_:1,__:[25]})]),_:1},8,["modelValue"]),V("div",Ze,[e(N,{size:"small",onClick:te},{default:t(()=>l[26]||(l[26]=[d("重置")])),_:1,__:[26]}),e(N,{size:"small",type:"primary",onClick:ee},{default:t(()=>l[27]||(l[27]=[d("确定")])),_:1,__:[27]})])]),_:1},8,["visible"])]),default:t(o=>[e(pe,{type:o.row.status==="ENABLED"?"success":"danger"},{default:t(()=>[d(k(o.row.status==="ENABLED"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(F,{label:"区间数量",width:"100"},{default:t(o=>[d(k(o.row.ranges.length),1)]),_:1}),e(F,{label:"网段列表","min-width":"200"},{default:t(o=>[e(H,{placement:"right",trigger:"hover",width:400},{default:t(()=>[(D(!0),S(Q,null,K(o.row.ranges,(O,oe)=>(D(),S("div",{key:oe,class:"mb-1"},k(O),1))),128))]),reference:t(()=>[V("div",et,[(D(!0),S(Q,null,K(o.row.ranges,(O,oe)=>(D(),S("div",{key:oe,class:"range-item-row"},k(O),1))),128)),o.row.ranges.length===0?(D(),S("div",tt," 无网段 ")):J("",!0)])]),_:2},1024)]),_:1}),e(F,{label:"已用/剩余IP",width:"120"},{default:t(o=>[d(k(o.row.usedCount)+"/"+k(o.row.availableCount),1)]),_:1}),e(F,{prop:"isAnycast",label:"Anycast",width:"80"},{header:t(()=>[l[32]||(l[32]=V("span",null,"Anycast",-1)),e(H,{placement:"bottom",width:"160",trigger:"click",visible:_.value,"onUpdate:visible":l[9]||(l[9]=o=>_.value=o)},{reference:t(()=>[e(X,{color:s.value!==""?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:t(()=>[e(T(Y))]),_:1},8,["color"])]),default:t(()=>[e(ue,{modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=o=>s.value=o),onChange:le},{default:t(()=>[e(q,{label:""},{default:t(()=>l[29]||(l[29]=[d("全部")])),_:1,__:[29]}),e(q,{label:!0},{default:t(()=>l[30]||(l[30]=[d("是")])),_:1,__:[30]}),e(q,{label:!1},{default:t(()=>l[31]||(l[31]=[d("否")])),_:1,__:[31]})]),_:1},8,["modelValue"])]),_:1},8,["visible"])]),default:t(o=>[e(pe,{type:o.row.isAnycast?"success":"info"},{default:t(()=>[d(k(o.row.isAnycast?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(F,{prop:"remark",label:"备注","min-width":"120","show-overflow-tooltip":""}),e(F,{label:"添加/修改信息","min-width":"180"},{default:t(o=>[V("div",null,"添加: "+k(o.row.createdAt)+" / "+k(o.row.createdBy),1),V("div",null,"修改: "+k(o.row.updatedAt)+" / "+k(o.row.updatedBy),1)]),_:1}),e(F,{label:"操作",width:"180",fixed:"right"},{default:t(o=>[e(N,{type:"primary",link:"",size:"small",onClick:O=>h(o.row)},{default:t(()=>l[33]||(l[33]=[d("编辑")])),_:2,__:[33]},1032,["onClick"]),e(N,{type:"danger",link:"",size:"small",onClick:O=>W(o.row)},{default:t(()=>l[34]||(l[34]=[d("删除")])),_:2,__:[34]},1032,["onClick"]),e(N,{type:"info",link:"",size:"small",onClick:O=>ge(o.row)},{default:t(()=>l[35]||(l[35]=[d("已分配IP")])),_:2,__:[35]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",lt,[e(we,{"current-page":i.page,"onUpdate:currentPage":l[10]||(l[10]=o=>i.page=o),"page-size":i.pageSize,"onUpdate:pageSize":l[11]||(l[11]=o=>i.pageSize=o),total:i.total,layout:"total, sizes, prev, pager, next, jumper",background:"","page-sizes":[10,20,50,100],onCurrentChange:x,onSizeChange:x},null,8,["current-page","page-size","total"])])]),_:1}),r.value?(D(),M(Te,{key:0,visible:r.value,editData:v.value,dataCenters:u.value,onClose:_e,onRefresh:Ie},null,8,["visible","editData","dataCenters"])):J("",!0),I.value?(D(),M(Je,{key:1,visible:I.value,pool:c.value,onClose:l[12]||(l[12]=o=>I.value=!1)},null,8,["visible","pool"])):J("",!0)])}}}),ot=se(at,[["__scopeId","data-v-b11fefb1"]]);export{ot as default};
