import{_ as ve,r as P,a as p,c as _e,o as be,b as ge,d as t,w as l,e as s,f as ke,g as H,h as r,i as Ve,j as n,k as we,t as y,u as J,l as K,E as z}from"./index-B5J7iWUL.js";const Ce={class:"region-management"},De={class:"card-header"},ye={class:"search-area"},Te={class:"mt-2 flex justify-end"},xe={class:"mt-2 flex justify-end"},Se={class:"pagination-container"},Ae={class:"dialog-footer"},ze={class:"text-xs text-gray-500 mt-2"},Ue={__name:"RegionManagement",setup(Fe){function b(){const o=Date.now()%1e12,e=Math.floor(Math.random()*1024),i=Math.floor(Math.random()*4096);return`LCG${o}${e.toString().padStart(3,"0")}${i.toString().padStart(4,"0")}`}const g=P({name:""}),_=p([]),U=p(!1),c=P({currentPage:1,pageSize:10,total:0}),k=p(!1),F=p(""),$=p(),C=p(!1),T=p(null),u=P({id:"",name:"",isDistributed:!1,status:"active",remark:"",createTime:"",createAccount:"",updateTime:"",updateAccount:""}),Q={name:[{required:!0,message:"请输入地域名称",trigger:"blur"}]},I=[{id:b(),name:"无锡",isDistributed:!1,status:"active",remark:"",createTime:"2024-01-15 10:30:00",createAccount:"admin",updateTime:"2024-01-20 14:20:00",updateAccount:"admin"},{id:b(),name:"上海",isDistributed:!1,status:"active",remark:"",createTime:"2024-01-18 09:15:00",createAccount:"operator1",updateTime:"2024-01-18 09:15:00",updateAccount:"operator1"},{id:b(),name:"广州",isDistributed:!1,status:"active",remark:"",createTime:"2024-01-10 16:45:00",createAccount:"admin",updateTime:"2024-01-25 11:30:00",updateAccount:"operator2"},{id:b(),name:"全国",isDistributed:!0,status:"active",remark:"全国范围",createTime:"2024-01-12 12:00:00",createAccount:"admin",updateTime:"2024-01-12 12:00:00",updateAccount:"admin"},{id:b(),name:"全球",isDistributed:!0,status:"disabled",remark:"全球范围",createTime:"2024-01-13 13:00:00",createAccount:"admin",updateTime:"2024-01-13 13:00:00",updateAccount:"admin"}],x=()=>{U.value=!0,setTimeout(()=>{_.value=I,c.total=I.length,U.value=!1},500)},j=p(!1),M=p(!1),V=p([]),w=p([]);function W(){V.value=[]}function X(){j.value=!1}function Y(){w.value=[]}function Z(){M.value=!1}const v=p({prop:"",order:""});function h({prop:o,order:e}){v.value={prop:o,order:e}}const ee=_e(()=>{let o=_.value;if(g.name){const e=g.name.trim().toLowerCase();o=o.filter(i=>i.name.toLowerCase().includes(e))}return V.value.length&&(o=o.filter(e=>V.value.includes(e.isDistributed))),w.value.length&&(o=o.filter(e=>w.value.includes(e.status))),v.value.prop&&v.value.order&&(o=[...o].sort((e,i)=>{let d=e[v.value.prop],m=i[v.value.prop];return(v.value.prop==="createTime"||v.value.prop==="updateTime")&&(d=new Date(d).getTime(),m=new Date(m).getTime()),v.value.order==="ascending"?d-m:m-d})),o}),R=()=>{c.currentPage=1,x()},te=()=>{Object.assign(g,{name:""}),R()},le=()=>{F.value="新建地域",Object.assign(u,{id:"",name:"",isDistributed:!1,status:"active",remark:"",createTime:"",createAccount:"",updateTime:"",updateAccount:""}),k.value=!0},ae=o=>{F.value="编辑地域",Object.assign(u,o),k.value=!0},oe=o=>{T.value=o,C.value=!0},ne=()=>{const o=_.value.findIndex(e=>e.id===T.value.id);o>-1&&(_.value.splice(o,1),c.total--,z.success("删除成功")),C.value=!1},ie=o=>{o.status=o.status==="active"?"disabled":"active",o.updateTime=new Date().toLocaleString(),o.updateAccount="current_user";const e=o.status==="active"?"启用":"禁用";z.success(`地域已${e}`)},se=()=>{$.value.validate(o=>{if(o){const e=new Date().toLocaleString(),i="current_user";if(u.id){const d=_.value.findIndex(m=>m.id===u.id);d>-1&&Object.assign(_.value[d],{...u,updateTime:e,updateAccount:i}),z.success("编辑成功")}else{const d={...u,id:b(),createTime:e,createAccount:i,updateTime:e,updateAccount:i};_.value.push(d),c.total++,z.success("新增成功")}k.value=!1}})},ue=()=>{var o;(o=$.value)==null||o.resetFields()},re=o=>{c.pageSize=o,x()},de=o=>{c.currentPage=o,x()};return be(()=>{x()}),(o,e)=>{const i=s("el-button"),d=s("el-input"),m=s("el-form-item"),E=s("el-form"),f=s("el-table-column"),S=s("el-checkbox"),L=s("el-checkbox-group"),B=s("el-icon"),O=s("el-popover"),q=s("el-tag"),me=s("el-table"),pe=s("el-pagination"),ce=s("el-card"),A=s("el-radio"),N=s("el-radio-group"),G=s("el-dialog"),fe=ke("loading");return H(),ge("div",Ce,[t(ce,{class:"box-card"},{header:l(()=>[r("div",De,[e[16]||(e[16]=r("span",null,"地域管理",-1)),t(i,{type:"primary",onClick:le},{default:l(()=>e[15]||(e[15]=[n("新建地域")])),_:1,__:[15]})])]),default:l(()=>[r("div",ye,[t(E,{inline:!0,model:g,class:"search-form"},{default:l(()=>[t(m,{label:"名称"},{default:l(()=>[t(d,{modelValue:g.name,"onUpdate:modelValue":e[0]||(e[0]=a=>g.name=a),placeholder:"请输入地域名称",clearable:""},null,8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(i,{type:"primary",onClick:R},{default:l(()=>e[17]||(e[17]=[n("搜索")])),_:1,__:[17]}),t(i,{onClick:te},{default:l(()=>e[18]||(e[18]=[n("重置")])),_:1,__:[18]})]),_:1})]),_:1},8,["model"])]),Ve((H(),we(me,{data:ee.value,style:{width:"100%"},border:"",stripe:"",onSortChange:h},{default:l(()=>[t(f,{prop:"id",label:"ID",width:"220",fixed:"left"}),t(f,{prop:"name",label:"名称",width:"120"}),t(f,{prop:"isDistributed",label:"是否分布式",width:"120"},{header:l(()=>[e[23]||(e[23]=r("span",null,"是否分布式",-1)),t(O,{placement:"bottom",width:"160",trigger:"click",visible:j.value,"onUpdate:visible":e[2]||(e[2]=a=>j.value=a)},{reference:l(()=>[t(B,{color:V.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:l(()=>[t(J(K))]),_:1},8,["color"])]),default:l(()=>[r("div",null,[t(L,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a)},{default:l(()=>[t(S,{label:!0},{default:l(()=>e[19]||(e[19]=[n("是")])),_:1,__:[19]}),t(S,{label:!1},{default:l(()=>e[20]||(e[20]=[n("否")])),_:1,__:[20]})]),_:1},8,["modelValue"]),r("div",Te,[t(i,{size:"small",onClick:W},{default:l(()=>e[21]||(e[21]=[n("重置")])),_:1,__:[21]}),t(i,{size:"small",type:"primary",onClick:X},{default:l(()=>e[22]||(e[22]=[n("确定")])),_:1,__:[22]})])])]),_:1},8,["visible"])]),default:l(a=>[t(q,{type:a.row.isDistributed?"success":"info"},{default:l(()=>[n(y(a.row.isDistributed?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"status",label:"状态",width:"100"},{header:l(()=>[e[28]||(e[28]=r("span",null,"状态",-1)),t(O,{placement:"bottom",width:"160",trigger:"click",visible:M.value,"onUpdate:visible":e[4]||(e[4]=a=>M.value=a)},{reference:l(()=>[t(B,{color:w.value.length?"#409EFF":"#909399",class:"ml-1 cursor-pointer"},{default:l(()=>[t(J(K))]),_:1},8,["color"])]),default:l(()=>[r("div",null,[t(L,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=a=>w.value=a)},{default:l(()=>[t(S,{label:"active"},{default:l(()=>e[24]||(e[24]=[n("启用")])),_:1,__:[24]}),t(S,{label:"disabled"},{default:l(()=>e[25]||(e[25]=[n("禁用")])),_:1,__:[25]})]),_:1},8,["modelValue"]),r("div",xe,[t(i,{size:"small",onClick:Y},{default:l(()=>e[26]||(e[26]=[n("重置")])),_:1,__:[26]}),t(i,{size:"small",type:"primary",onClick:Z},{default:l(()=>e[27]||(e[27]=[n("确定")])),_:1,__:[27]})])])]),_:1},8,["visible"])]),default:l(a=>[t(q,{type:a.row.status==="active"?"success":"danger"},{default:l(()=>[n(y(a.row.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(f,{prop:"remark",label:"备注",width:"200","show-overflow-tooltip":""}),t(f,{prop:"createTime",label:"添加时间",width:"160",sortable:"custom"}),t(f,{prop:"createAccount",label:"添加账号",width:"120"}),t(f,{prop:"updateTime",label:"最后修改时间",width:"160",sortable:"custom"}),t(f,{prop:"updateAccount",label:"最后修改账号",width:"120"}),t(f,{label:"操作",width:"200",fixed:"right"},{default:l(a=>[t(i,{type:"primary",link:"",size:"small",onClick:D=>ae(a.row)},{default:l(()=>e[29]||(e[29]=[n("编辑")])),_:2,__:[29]},1032,["onClick"]),t(i,{type:a.row.status==="active"?"danger":"success",link:"",size:"small",onClick:D=>ie(a.row)},{default:l(()=>[n(y(a.row.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),t(i,{type:"danger",link:"",size:"small",onClick:D=>oe(a.row)},{default:l(()=>e[30]||(e[30]=[n("删除")])),_:2,__:[30]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[fe,U.value]]),r("div",Se,[t(pe,{"current-page":c.currentPage,"onUpdate:currentPage":e[5]||(e[5]=a=>c.currentPage=a),"page-size":c.pageSize,"onUpdate:pageSize":e[6]||(e[6]=a=>c.pageSize=a),"page-sizes":[10,20,50,100],total:c.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:re,onCurrentChange:de},null,8,["current-page","page-size","total"])])]),_:1}),t(G,{modelValue:k.value,"onUpdate:modelValue":e[12]||(e[12]=a=>k.value=a),title:F.value,width:"500px",onClose:ue},{footer:l(()=>[r("span",Ae,[t(i,{onClick:e[11]||(e[11]=a=>k.value=!1)},{default:l(()=>e[35]||(e[35]=[n("取消")])),_:1,__:[35]}),t(i,{type:"primary",onClick:se},{default:l(()=>e[36]||(e[36]=[n("确定")])),_:1,__:[36]})])]),default:l(()=>[t(E,{model:u,rules:Q,ref_key:"formRef",ref:$,"label-width":"120px"},{default:l(()=>[t(m,{label:"名称",prop:"name"},{default:l(()=>[t(d,{modelValue:u.name,"onUpdate:modelValue":e[7]||(e[7]=a=>u.name=a),placeholder:"请输入地域名称"},null,8,["modelValue"])]),_:1}),t(m,{label:"是否分布式",prop:"isDistributed"},{default:l(()=>[t(N,{modelValue:u.isDistributed,"onUpdate:modelValue":e[8]||(e[8]=a=>u.isDistributed=a)},{default:l(()=>[t(A,{value:!0},{default:l(()=>e[31]||(e[31]=[n("是")])),_:1,__:[31]}),t(A,{value:!1},{default:l(()=>e[32]||(e[32]=[n("否")])),_:1,__:[32]})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"状态",prop:"status"},{default:l(()=>[t(N,{modelValue:u.status,"onUpdate:modelValue":e[9]||(e[9]=a=>u.status=a)},{default:l(()=>[t(A,{label:"active"},{default:l(()=>e[33]||(e[33]=[n("启用")])),_:1,__:[33]}),t(A,{label:"disabled"},{default:l(()=>e[34]||(e[34]=[n("禁用")])),_:1,__:[34]})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"备注",prop:"remark"},{default:l(()=>[t(d,{modelValue:u.remark,"onUpdate:modelValue":e[10]||(e[10]=a=>u.remark=a),type:"textarea",rows:2,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(G,{modelValue:C.value,"onUpdate:modelValue":e[14]||(e[14]=a=>C.value=a),title:"确认删除",width:"400px"},{footer:l(()=>[t(i,{onClick:e[13]||(e[13]=a=>C.value=!1)},{default:l(()=>e[39]||(e[39]=[n("取消")])),_:1,__:[39]}),t(i,{type:"danger",onClick:ne},{default:l(()=>e[40]||(e[40]=[n("确认删除")])),_:1,__:[40]})]),default:l(()=>{var a,D;return[r("div",null,[e[37]||(e[37]=n("确定要删除地域 ")),r("b",null,y((a=T.value)==null?void 0:a.name),1),e[38]||(e[38]=n(" 吗？"))]),r("div",ze,"ID: "+y((D=T.value)==null?void 0:D.id),1)]}),_:1},8,["modelValue"])])}}},je=ve(Ue,[["__scopeId","data-v-70cebcc8"]]);export{je as default};
